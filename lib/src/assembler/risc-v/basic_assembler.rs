/*
 * Permission is hereby granted, free of charge, to any human obtaining a copy of this software and associated documentation files
 * (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify,
 * merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit humans to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

// To ensure safety we provice separate types for different classes of registers.
// But Rust compiler currently is not advanced enough to produce e.g. effective conversion from ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ to
// ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğğšğ›ğ¢: while you just need to copy value without doing anything compiler doesn't always optimize
// checks away.

// To make sure this woulnd't happen we are providing that conversion only for tests: ğ’˜ğ’“ğ’‚ğ’‘ğ’‘ğ’†ğ’“_ğ’‡ğ’ğ’“_ğ’•ğ’†ğ’”ğ’•<ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ>
// would be converted to ğ’˜ğ’“ğ’‚ğ’‘ğ’‘ğ’†ğ’“_ğ’‡ğ’ğ’“_ğ’•ğ’†ğ’”ğ’•<ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğğšğ›ğ¢> using safe code and matching values.

// The actual, production, conversion is compared to that one on the full range of ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ.

// This way we can guarantee that our tests are enough to ensure safety.
// Note: since mistakes here may trigger undefined behavior tests have to be run with â€œcargo +nightly miri testâ€.

ğ–‰ğ–Šğ–‹ğ–ğ–“ğ–Š_ğ–Šğ–“ğ–šğ–’ğ–˜! {
    [{|value| !(1..=31).contains(&value)}]
    [   ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğğšğ›ğ¢,
        ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ®ğšğ›ğ¢
    ]
    [   ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ {|value| value == 0},
        ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğğšğ›ğ¢ {|value| value == 0},
        ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ®ğšğ›ğ¢ {|value| value == 0}
    ]
    pub enum(i8, u8) ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ {
        ğ”µ1 = 1,
        ğ”µ2 = 2,
        ğ”µ3 = 3,
        ğ”µ4 = 4,
        ğ”µ5 = 5,
        ğ”µ6 = 6,
        ğ”µ7 = 7,
        ğ”µ8 = 8,
        ğ”µ9 = 9,
        ğ”µ10 = 10,
        ğ”µ11 = 11,
        ğ”µ12 = 12,
        ğ”µ13 = 13,
        ğ”µ14 = 14,
        ğ”µ15 = 15,
        ğ”µ16 = 16,
        ğ”µ17 = 17,
        ğ”µ18 = 18,
        ğ”µ19 = 19,
        ğ”µ20 = 20,
        ğ”µ21 = 21,
        ğ”µ22 = 22,
        ğ”µ23 = 23,
        ğ”µ24 = 24,
        ğ”µ25 = 25,
        ğ”µ26 = 26,
        ğ”µ27 = 27,
        ğ”µ28 = 28,
        ğ”µ29 = 29,
        ğ”µ30 = 30,
        ğ”µ31 = 31
    }

    [{|value| !(1..=31).contains(&value)}]
    [   ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ,
        ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ®ğšğ›ğ¢
    ]
    [   ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ {|value| value == 0},
        ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğğšğ›ğ¢ {|value| value == 0},
        ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ®ğšğ›ğ¢ {|value| value == 0}
    ]
    pub enum(i8, u8) ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğğšğ›ğ¢ {
        ğ”¯ğ” = 1,
        ğ”°ğ”­ = 2,
        ğ”¤ğ”­ = 3,
        ğ”±ğ”­ = 4,
        ğ”±0 = 5,
        ğ”°3 = 6,
        ğ”°4 = 7,
        ğ”°0 = 8,
        ğ”°1 = 9,
        ğ”0 = 10,
        ğ”1 = 11,
        ğ”2 = 12,
        ğ”3 = 13,
        ğ”°2 = 14,
        ğ”±1 = 15,
        ğ”°5 = 16,
        ğ”°6 = 17,
        ğ”°7 = 18,
        ğ”°8 = 19,
        ğ”°9 = 20,
        ğ”°10 = 21,
        ğ”°11 = 22,
        ğ”°12 = 23,
        ğ”°13 = 24,
        ğ”°14 = 25,
        ğ”°15 = 26,
        ğ”°16 = 27,
        ğ”°17 = 28,
        ğ”°18 = 29,
        ğ”°19 = 30,
        ğ”°20 = 31
    }

    [{|value| !(1..=31).contains(&value)}]
    [   ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ,
        ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğğšğ›ğ¢
    ]
    [   ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ {|value| value == 0},
        ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğğšğ›ğ¢ {|value| value == 0},
        ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ®ğšğ›ğ¢ {|value| value == 0}
    ]
    pub enum(i8, u8) ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ®ğšğ›ğ¢ {
        ğ”¯ğ” = 1,
        ğ”°ğ”­ = 2,
        ğ”¤ğ”­ = 3,
        ğ”±ğ”­ = 4,
        ğ”±0 = 5,
        ğ”±1 = 6,
        ğ”±2 = 7,
        ğ”°0 = 8,
        ğ”°1 = 9,
        ğ”0 = 10,
        ğ”1 = 11,
        ğ”2 = 12,
        ğ”3 = 13,
        ğ”4 = 14,
        ğ”5 = 15,
        ğ”6 = 16,
        ğ”7 = 17,
        ğ”°2 = 18,
        ğ”°3 = 19,
        ğ”°4 = 20,
        ğ”°5 = 21,
        ğ”°6 = 22,
        ğ”°7 = 23,
        ğ”°8 = 24,
        ğ”°9 = 25,
        ğ”°10 = 26,
        ğ”°11 = 27,
        ğ”±3 = 28,
        ğ”±4 = 29,
        ğ”±5 = 30,
        ğ”±6 = 31
    }

    [{|value| !(0..=31).contains(&value)}]
    [   ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ,
        ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğğšğ›ğ¢,
        ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ®ğšğ›ğ¢,
        ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğğšğ›ğ¢,
        ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ®ğšğ›ğ¢
    ]
    []
    pub enum(i8, u8) ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ {
        ğ”µ0 = 0,
        ğ”µ1 = 1,
        ğ”µ2 = 2,
        ğ”µ3 = 3,
        ğ”µ4 = 4,
        ğ”µ5 = 5,
        ğ”µ6 = 6,
        ğ”µ7 = 7,
        ğ”µ8 = 8,
        ğ”µ9 = 9,
        ğ”µ10 = 10,
        ğ”µ11 = 11,
        ğ”µ12 = 12,
        ğ”µ13 = 13,
        ğ”µ14 = 14,
        ğ”µ15 = 15,
        ğ”µ16 = 16,
        ğ”µ17 = 17,
        ğ”µ18 = 18,
        ğ”µ19 = 19,
        ğ”µ20 = 20,
        ğ”µ21 = 21,
        ğ”µ22 = 22,
        ğ”µ23 = 23,
        ğ”µ24 = 24,
        ğ”µ25 = 25,
        ğ”µ26 = 26,
        ğ”µ27 = 27,
        ğ”µ28 = 28,
        ğ”µ29 = 29,
        ğ”µ30 = 30,
        ğ”µ31 = 31
    }

    [{|value| !(0..=31).contains(&value)}]
    [   ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ,
        ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğğšğ›ğ¢,
        ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ®ğšğ›ğ¢,
        ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ,
        ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ®ğšğ›ğ¢
    ]
    []
    pub enum(i8, u8) ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğğšğ›ğ¢ {
        ğ”·ğ”¢ğ”¯ğ”¬ = 0,
        ğ”¯ğ” = 1,
        ğ”°ğ”­ = 2,
        ğ”¤ğ”­ = 3,
        ğ”±ğ”­ = 4,
        ğ”±0 = 5,
        ğ”°3 = 6,
        ğ”°4 = 7,
        ğ”°0 = 8,
        ğ”°1 = 9,
        ğ”0 = 10,
        ğ”1 = 11,
        ğ”2 = 12,
        ğ”3 = 13,
        ğ”°2 = 14,
        ğ”±1 = 15,
        ğ”°5 = 16,
        ğ”°6 = 17,
        ğ”°7 = 18,
        ğ”°8 = 19,
        ğ”°9 = 20,
        ğ”°10 = 21,
        ğ”°11 = 22,
        ğ”°12 = 23,
        ğ”°13 = 24,
        ğ”°14 = 25,
        ğ”°15 = 26,
        ğ”°16 = 27,
        ğ”°17 = 28,
        ğ”°18 = 29,
        ğ”°19 = 30,
        ğ”°20 = 31
    }

    [{|value| !(0..=31).contains(&value)}]
    [   ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ,
        ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğğšğ›ğ¢,
        ğ§ğ¨ğ³ğğ«ğ¨_ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ®ğšğ›ğ¢,
        ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ,
        ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğğšğ›ğ¢
    ]
    []
    pub enum(i8, u8) ğ ğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ®ğšğ›ğ¢ {
        ğ”·ğ”¢ğ”¯ğ”¬ = 0,
        ğ”¯ğ” = 1,
        ğ”°ğ”­ = 2,
        ğ”¤ğ”­ = 3,
        ğ”±ğ”­ = 4,
        ğ”±0 = 5,
        ğ”±1 = 6,
        ğ”±2 = 7,
        ğ”°0 = 8,
        ğ”°1 = 9,
        ğ”0 = 10,
        ğ”1 = 11,
        ğ”2 = 12,
        ğ”3 = 13,
        ğ”4 = 14,
        ğ”5 = 15,
        ğ”6 = 16,
        ğ”7 = 17,
        ğ”°2 = 18,
        ğ”°3 = 19,
        ğ”°4 = 20,
        ğ”°5 = 21,
        ğ”°6 = 22,
        ğ”°7 = 23,
        ğ”°8 = 24,
        ğ”°9 = 25,
        ğ”°10 = 26,
        ğ”°11 = 27,
        ğ”±3 = 28,
        ğ”±4 = 29,
        ğ”±5 = 30,
        ğ”±6 = 31
    }

    [{|value| !(0..=31).contains(&value)}]
    [ğŸğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğšğ›ğ¢]
    []
    pub enum(i8, u8) ğŸğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ {
        ğ”£0 = 0,
        ğ”£1 = 1,
        ğ”£2 = 2,
        ğ”£3 = 3,
        ğ”£4 = 4,
        ğ”£5 = 5,
        ğ”£6 = 6,
        ğ”£7 = 7,
        ğ”£8 = 8,
        ğ”£9 = 9,
        ğ”£10 = 10,
        ğ”£11 = 11,
        ğ”£12 = 12,
        ğ”£13 = 13,
        ğ”£14 = 14,
        ğ”£15 = 15,
        ğ”£16 = 16,
        ğ”£17 = 17,
        ğ”£18 = 18,
        ğ”£19 = 19,
        ğ”£20 = 20,
        ğ”£21 = 21,
        ğ”£22 = 22,
        ğ”£23 = 23,
        ğ”£24 = 24,
        ğ”£25 = 25,
        ğ”£26 = 26,
        ğ”£27 = 27,
        ğ”£28 = 28,
        ğ”£29 = 29,
        ğ”£30 = 30,
        ğ”£31 = 31
    }

    [{|value| !(0..=31).contains(&value)}]
    [ğŸğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ§ğ®ğ¦ğğ«ğ¢ğœ]
    []
    pub enum(i8, u8) ğŸğ©_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğšğ›ğ¢ {
        ğ”£ğ”±0 = 0,
        ğ”£ğ”±1 = 1,
        ğ”£ğ”±2 = 2,
        ğ”£ğ”±3 = 3,
        ğ”£ğ”±4 = 4,
        ğ”£ğ”±5 = 5,
        ğ”£ğ”±6 = 6,
        ğ”£ğ”±7 = 7,
        ğ”£ğ”°0 = 8,
        ğ”£ğ”°1 = 9,
        ğ”£ğ”0 = 10,
        ğ”£ğ”1 = 11,
        ğ”£ğ”2 = 12,
        ğ”£ğ”3 = 13,
        ğ”£ğ”4 = 14,
        ğ”£ğ”5 = 15,
        ğ”£ğ”6 = 16,
        ğ”£ğ”7 = 17,
        ğ”£ğ”°2 = 18,
        ğ”£ğ”°3 = 19,
        ğ”£ğ”°4 = 20,
        ğ”£ğ”°5 = 21,
        ğ”£ğ”°6 = 22,
        ğ”£ğ”°7 = 23,
        ğ”£ğ”°8 = 24,
        ğ”£ğ”°9 = 25,
        ğ”£ğ”°10 = 26,
        ğ”£ğ”°11 = 27,
        ğ”£ğ”±8 = 28,
        ğ”£ğ”±9 = 29,
        ğ”£ğ”±10 = 30,
        ğ”£ğ”±11 = 31
    }

    [{|value| !(0x001..=0x003).contains(&value) && !(0xc00..=0xc02).contains(&value) && !(0xc80..=0xc82).contains(&value)}]
    [ğœğ¬ğ«_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ«ğ¯ğŸ”ğŸ’]
    []
    pub enum(i16, u16) ğœğ¬ğ«_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ«ğ¯ğŸ‘ğŸ {
        ğ”£ğ”£ğ”©ğ”ğ”¤ğ”° = 0x001,
        ğ”£ğ”¯ğ”ª = 0x002,
        ğ”£ğ” ğ”°ğ”¯ = 0x003,
        ğ” ğ”¶ğ” ğ”©ğ”¢ = 0xc00,
        ğ”±ğ”¦ğ”ªğ”¢ = 0xc01,
        ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”¢ğ”± = 0xc02,
        ğ” ğ”¶ğ” ğ”©ğ”¢ğ”¥ = 0xc80,
        ğ”±ğ”¦ğ”ªğ”¢ğ”¥ = 0xc81,
        ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”¢ğ”±ğ”¥ = 0xc82
    }

    [{|value| !(0x001..=0x003).contains(&value) && !(0xc00..=0xc02).contains(&value)}]
    []
    [   ğœğ¬ğ«_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ«ğ¯ğŸ‘ğŸ {|value| value >= 0xc80}]
    pub enum(i16, u16) ğœğ¬ğ«_ğ«ğğ ğ¢ğ¬ğ­ğğ«_ğ«ğ¯ğŸ”ğŸ’ {
        ğ”£ğ”£ğ”©ğ”ğ”¤ğ”° = 0x001,
        ğ”£ğ”¯ğ”ª = 0x002,
        ğ”£ğ” ğ”°ğ”¯ = 0x003,
        ğ” ğ”¶ğ” ğ”©ğ”¢ = 0xc00,
        ğ”±ğ”¦ğ”ªğ”¢ = 0xc01,
        ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”¢ğ”± = 0xc02
    }
}
