/*
 * Permission is hereby granted, free of charge, to any human obtaining a copy of this software and associated documentation files
 * (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify,
 * merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit humans to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

#ifndef ğ”„ğ”–ğ”–ğ”ˆğ”ğ”…ğ”ğ”ˆâ„œ_ğ”›86_ğ”…ğ”œğ”—ğ”ˆ_ğ”ˆğ”â„‘ğ”—_ğ”„ğ”–ğ”–ğ”ˆğ”ğ”…ğ”ğ”ˆâ„œ_â„Œ
#define ğ”„ğ”–ğ”–ğ”ˆğ”ğ”…ğ”ğ”ˆâ„œ_ğ”›86_ğ”…ğ”œğ”—ğ”ˆ_ğ”ˆğ”â„‘ğ”—_ğ”„ğ”–ğ”–ğ”ˆğ”ğ”…ğ”ğ”ˆâ„œ_â„Œ

#include <array>
#include <tuple>
#include <type_traits>

#include "yace/foundation.h"

#include "yace/assembler/x86/basic_assembler.h"
#include "yace/assembler/x86/options.h"

namespace ğ˜†ğ—®ğ—°ğ—²::ğ˜…ğŸ´ğŸ² {

// Assembler capable of emitting bytes.  Note: it delegates work of actually allocating
// memory, etc to descendant assembler.
template <typename ğ“ªğ“¼ğ“¼ğ“®ğ“¶ğ“«ğ“µğ“®ğ“», auto ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼>
class ğ’ƒğ’šğ’•ğ’†_ğ’†ğ’ğ’Šğ’•_ğ’‚ğ’”ğ’”ğ’†ğ’ğ’ƒğ’ğ’†ğ’“ : public ğ’ƒğ’‚ğ’”ğ’Šğ’„_ğ’‚ğ’”ğ’”ğ’†ğ’ğ’ƒğ’ğ’†ğ’“<ğ“ªğ“¼ğ“¼ğ“®ğ“¶ğ“«ğ“µğ“®ğ“», ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼> {
  using â’« = ğ’ƒğ’‚ğ’”ğ’Šğ’„_ğ’‚ğ’”ğ’”ğ’†ğ’ğ’ƒğ’ğ’†ğ’“<ğ“ªğ“¼ğ“¼ğ“®ğ“¶ğ“«ğ“µğ“®ğ“», ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼>;
  using â’® = ğ’ƒğ’šğ’•ğ’†_ğ’†ğ’ğ’Šğ’•_ğ’‚ğ’”ğ’”ğ’†ğ’ğ’ƒğ’ğ’†ğ’“<ğ“ªğ“¼ğ“¼ğ“®ğ“¶ğ“«ğ“µğ“®ğ“», ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼>;
  friend â’«;

 protected:
#define ğ–ğ–“ğ–˜ğ–™ğ–—ğ–šğ–ˆğ–™ğ–ğ–”ğ–“_ğ–ˆğ–ğ–Šğ–ˆğ–ğ–˜(...) (ğ–ğ–†ğ–ˆğ–Š_ğ–‰ğ–Šğ–‹ğ–ğ–“ğ–Š_ğ–ˆğ–”ğ–—ğ–Š(ğ–ğ–“ğ–˜ğ–™ğ–—ğ–šğ–ˆğ–™ğ–ğ–”ğ–“_ğ–ˆğ–ğ–Šğ–ˆğ–, (or), ğ–ğ–†ğ–ˆğ–Š_ğ–•ğ–†ğ–—ğ–Šğ–“ğ–˜((), (), __VA_ARGS__)))
#define ğ–ğ–“ğ–˜ğ–™ğ–—ğ–šğ–ˆğ–™ğ–ğ–”ğ–“_ğ–ˆğ–ğ–Šğ–ˆğ–(ğ“·ğ“ªğ“¶ğ“®) ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“·ğ“ªğ“¶ğ“® == ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§::ğ“·ğ“ªğ“¶ğ“®
  template <ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§ ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“·ğ“ªğ“¶ğ“®, typename... ğ“£>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(const ğ“£... ğ“½) {
    // Some old 8086 instructions are â€œone of kindâ€: very quirky and follow special rules.
    // It's easier to detect and handle them specially than to try to process then with all others.
    // Here's the list:
    //   ğ” ğ”ªğ”­ğ”°/ğ”ªğ”¬ğ”³ğ”° â€” two explicit memory arguments, but they have to always be â€œxxx PTR [xSI]â€ and â€œxxx PTR [xDI]â€.
    //   ğ”¦ğ”«ğ”° - two operands, one always â€œxxx PTR [xDI]â€, one always â€œDXâ€ (even in 32-bit/64-bit mode).
    //   ğ”©ğ”¬ğ”¡ğ”° â€” one explicit memory argument, but it has to always be â€œxxx PTR [xSI]â€.
    //   ğ”¬ğ”²ğ”±ğ”° - two operands, one always â€œDXâ€ (even in 32-bit/64-bit mode), one always â€œxxx PTR [xDI]â€.
    //   ğ”°ğ” ğ”ğ”°/ğ”°ğ”±ğ”¬ğ”° â€” one explicit memory argument, but it has to always be â€œxxx PTR [xDI]â€.

    if constexpr (
        ğ–ğ–“ğ–˜ğ–™ğ–—ğ–šğ–ˆğ–™ğ–ğ–”ğ–“_ğ–ˆğ–ğ–Šğ–ˆğ–ğ–˜(ğ” ğ”ªğ”­ğ”°, ğ”¦ğ”«ğ”°, ğ”©ğ”¬ğ”¡ğ”°, ğ”ªğ”¬ğ”³ğ”°, ğ”¬ğ”²ğ”±ğ”°, ğ”°ğ” ğ”ğ”°, ğ”°ğ”±ğ”¬ğ”°) or
        ğ–ğ–“ğ–˜ğ–™ğ–—ğ–šğ–ˆğ–™ğ–ğ–”ğ–“_ğ–ˆğ–ğ–Šğ–ˆğ–ğ–˜(ğ”¯ğ”¢ğ”­ğ”·_ğ” ğ”ªğ”­ğ”°, ğ”¯ğ”¢ğ”­_ğ”¦ğ”«ğ”°, ğ”¯ğ”¢ğ”­_ğ”©ğ”¬ğ”¡ğ”°, ğ”¯ğ”¢ğ”­_ğ”ªğ”¬ğ”³ğ”°, ğ”¯ğ”¢ğ”­_ğ”¬ğ”²ğ”±ğ”°, ğ”¯ğ”¢ğ”­ğ”·_ğ”°ğ” ğ”ğ”°, ğ”¯ğ”¢ğ”­_ğ”°ğ”±ğ”¬ğ”°) or
        ğ–ğ–“ğ–˜ğ–™ğ–—ğ–šğ–ˆğ–™ğ–ğ–”ğ–“_ğ–ˆğ–ğ–Šğ–ˆğ–ğ–˜(ğ”¯ğ”¢ğ”­ğ”«ğ”·_ğ” ğ”ªğ”­ğ”°, ğ”¯ğ”¢ğ”­ğ”«ğ”·_ğ”¦ğ”«ğ”°, ğ”¯ğ”¢ğ”­ğ”«ğ”·_ğ”©ğ”¬ğ”¡ğ”°, ğ”¯ğ”¢ğ”­ğ”«ğ”·_ğ”ªğ”¬ğ”³ğ”°, ğ”¯ğ”¢ğ”­ğ”«ğ”·_ğ”¬ğ”²ğ”±ğ”°, ğ”¯ğ”¢ğ”­ğ”«ğ”·_ğ”°ğ” ğ”ğ”°, ğ”¯ğ”¢ğ”­ğ”«ğ”·_ğ”°ğ”±ğ”¬ğ”°)) {
      return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ ğ‘¡ğ‘Ÿğ‘–ğ‘›ğ‘”_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“·ğ“ªğ“¶ğ“®>(ğ“½...);
    } else {
      // Detailed information about instruction.
      using ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§_ğ¢ğ§ğŸğ¨ = ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ’Šğ’ğ’”ğ’•ğ’“ğ’–ğ’„ğ’•ğ’Šğ’ğ’_ğ’Šğ’ğ’‡ğ’<ğ’ƒğ’šğ’•ğ’†_ğ’†ğ’ğ’Šğ’•_ğ’‚ğ’”ğ’”ğ’†ğ’ğ’ƒğ’ğ’†ğ’“, ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“·ğ“ªğ“¶ğ“®, ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<ğ“£>...>;
      std::tuple arguments{ğ“½...};

      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¦ğ”°_ğ”³ğ”¢ğ”µ_ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«<ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§_ğ¢ğ§ğŸğ¨>) {
        return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘£ğ‘’ğ‘¥_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›<ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§_ğ¢ğ§ğŸğ¨>(arguments);
      } else if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¦ğ”°_ğ”¢ğ”³ğ”¢ğ”µ_ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«<ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§_ğ¢ğ§ğŸğ¨>) {
        return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘’ğ‘£ğ‘’ğ‘¥_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›<ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§_ğ¢ğ§ğŸğ¨>(arguments);
      } else if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¦ğ”°_ğ”µğ”¬ğ”­_ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«<ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§_ğ¢ğ§ğŸğ¨>) {
        // Note: ğ”³ğ”¢ğ”µ-encoding and ğ”µğ”¬ğ”­-encoding are very similar, only ğ”³ğ”¢ğ”µ-encoding have short 2-byte form.
        // ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘£ğ‘’ğ‘¥_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘› handles short case  or calls ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘™ğ‘œğ‘›ğ‘”ğ‘£ğ‘’ğ‘¥_ğ‘œğ‘Ÿ_ğ‘¥ğ‘œğ‘_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘› to handle 3-byte form.
        return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘™ğ‘œğ‘›ğ‘”ğ‘£ğ‘’ğ‘¥_ğ‘œğ‘Ÿ_ğ‘¥ğ‘œğ‘_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›<ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§_ğ¢ğ§ğŸğ¨>(arguments);
      } else {
        return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘™ğ‘’ğ‘”ğ‘ğ‘ğ‘¦_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›<ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§_ğ¢ğ§ğŸğ¨>(arguments);
      }
    }
  }

  // Default implementations.  Used if ğ“ªğ“¼ğ“¼ğ“®ğ“¶ğ“«ğ“µğ“®ğ“» doesn't offer any optimized versions.
  // Note: emitâ‚â‚†/emitâ‚ƒâ‚‚/emitâ‚†â‚„ must emit value as little-endian integer.
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) emitâ‚â‚†(ğ®ğ¢ğ§ğ­â‚â‚† value) {
    // NOLINTNEXTLINE(hicpp-signed-bitwise)
    return get_assembler().emitâ‚ˆ(ğ®ğ¢ğ§ğ­â‚ˆ(value)).emitâ‚ˆ(ğ®ğ¢ğ§ğ­â‚ˆ(value >> ğ®ğ¢ğ§ğ­â‚â‚†(8)));
  }
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) emitâ‚ƒâ‚‚(ğ®ğ¢ğ§ğ­â‚ƒâ‚‚ value) {
    // NOLINTNEXTLINE(hicpp-signed-bitwise)
    return get_assembler().emitâ‚â‚†(ğ®ğ¢ğ§ğ­â‚â‚†(value)).emitâ‚â‚†(ğ®ğ¢ğ§ğ­â‚â‚†(value >> ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(16)));
  }
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) emitâ‚†â‚„(ğ®ğ¢ğ§ğ­â‚†â‚„ value) {
    // NOLINTNEXTLINE(hicpp-signed-bitwise)
    return get_assembler().emitâ‚ƒâ‚‚(ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(value)).emitâ‚ƒâ‚‚(ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(value >> ğ®ğ¢ğ§ğ­â‚†â‚„(32)));
  }

  // Instructions are emitted ass three arrays: prefixes+opcode with ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š, then ModRM+SIB+disp with ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜ and, finally, ğ‘’ğ‘šğ‘–ğ‘¡áµ¢â‚˜â‚˜.
  // Only ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š are used for all instructions, ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜ and ğ‘’ğ‘šğ‘–ğ‘¡áµ¢â‚˜â‚˜ may be skipped.
  template <ğ¬ğ¢ğ³ğ ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“±>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(const std::array<ğ®ğ¢ğ§ğ­â‚ˆ, ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“±>& array) {
    return get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚áµ£áµ£(array);
  }
  template <ğ¬ğ¢ğ³ğ ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“±>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(const std::array<ğ®ğ¢ğ§ğ­â‚ˆ, ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“±>& array) {
    return get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚áµ£áµ£(array);
  }
  template <ğ¬ğ¢ğ³ğ ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“±>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡áµ¢â‚˜â‚˜(const std::array<ğ®ğ¢ğ§ğ­â‚ˆ, ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“±>& array) {
    return get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚áµ£áµ£(array);
  }

  // See ğ’ƒğ’‚ğ’”ğ’Šğ’„_ğ’„ğ’ğ’ğ’”ğ’•ğ’†ğ’™ğ’‘ğ’“_ğ’‚ğ’”ğ’”ğ’†ğ’ğ’ƒğ’ğ’†ğ’“ for explanation about why we emit instructions are sequences of up-to-8-bytes.
  template <ğ¬ğ¢ğ³ğ ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“±>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡â‚áµ£áµ£(const std::array<ğ®ğ¢ğ§ğ­â‚ˆ, ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“±>& array) {
    static_assert(ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“± > 0);
    static_assert(ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“± <= 8);
    if constexpr (ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“± == 1) {
      return get_assembler().emitâ‚ˆ(array[0]);
    } else if constexpr (ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“± == 2) {
      // NOLINTNEXTLINE(hicpp-signed-bitwise)
      return get_assembler().emitâ‚â‚†(ğ®ğ¢ğ§ğ­â‚â‚†((ğ®ğ¢ğ§ğ­â‚â‚†(array[1]) << ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor ğ®ğ¢ğ§ğ­â‚â‚†(array[0])));
    } else if constexpr (ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“± == 3) {
      // NOLINTNEXTLINE(hicpp-signed-bitwise)
      return get_assembler().emitâ‚ˆ(array[0]).emitâ‚â‚†(ğ®ğ¢ğ§ğ­â‚â‚†((ğ®ğ¢ğ§ğ­â‚â‚†(array[2]) << ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor ğ®ğ¢ğ§ğ­â‚â‚†(array[1])));
    } else if constexpr (ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“± == 4) {
      return get_assembler().emitâ‚ƒâ‚‚(
          // NOLINTNEXTLINE(hicpp-signed-bitwise)
          (ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[3]) << 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor (ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[2]) << 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor (ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[1]) << ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor
          ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[0]));
    } else if constexpr (ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“± == 5) {
      return get_assembler().emitâ‚ˆ(array[0]).emitâ‚ƒâ‚‚(
          // NOLINTNEXTLINE(hicpp-signed-bitwise)
          (ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[4]) << 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor (ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[3]) << 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor (ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[2]) << ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor
          ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[1]));
    } else if constexpr (ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“± == 6) {
      return get_assembler()
          // NOLINTNEXTLINE(hicpp-signed-bitwise)
          .emitâ‚â‚†(ğ®ğ¢ğ§ğ­â‚â‚†((ğ®ğ¢ğ§ğ­â‚â‚†(array[1]) << ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor ğ®ğ¢ğ§ğ­â‚â‚†(array[0])))
          .emitâ‚ƒâ‚‚(
              // NOLINTNEXTLINE(hicpp-signed-bitwise)
              (ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[5]) << 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor (ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[4]) << 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor (ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[3]) << ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor
              ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[2]));
    } else if constexpr (ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“± == 7) {
      return get_assembler()
          .emitâ‚ˆ(array[0])
          // NOLINTNEXTLINE(hicpp-signed-bitwise)
          .emitâ‚â‚†((ğ®ğ¢ğ§ğ­â‚â‚†(array[2]) << ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor ğ®ğ¢ğ§ğ­â‚â‚†(array[1]))
          // NOLINTNEXTLINE(hicpp-signed-bitwise)
          .emitâ‚ƒâ‚‚(
              (ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[6]) << 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor (ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[5]) << 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor (ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[4]) << ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor
              ğ®ğ¢ğ§ğ­â‚ƒâ‚‚(array[3]));
    } else if constexpr (ğ“ªğ“»ğ“»ğ“ªğ”‚_ğ“µğ“®ğ“·ğ“°ğ“½ğ“± == 8) {
      return get_assembler().emitâ‚†â‚„(
          // NOLINTNEXTLINE(hicpp-signed-bitwise)
          (ğ®ğ¢ğ§ğ­â‚†â‚„(array[7]) << 7 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor (ğ®ğ¢ğ§ğ­â‚†â‚„(array[6]) << 6 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor (ğ®ğ¢ğ§ğ­â‚†â‚„(array[5]) << 5 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor
          // NOLINTNEXTLINE(hicpp-signed-bitwise)
          (ğ®ğ¢ğ§ğ­â‚†â‚„(array[4]) << 4 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor (ğ®ğ¢ğ§ğ­â‚†â‚„(array[3]) << 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor (ğ®ğ¢ğ§ğ­â‚†â‚„(array[2]) << 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor
          // NOLINTNEXTLINE(hicpp-signed-bitwise)
          (ğ®ğ¢ğ§ğ­â‚†â‚„(array[1]) << ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢) bitor ğ®ğ¢ğ§ğ­â‚†â‚„(array[0]));
    }
  }

 private:
  template <ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§ ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“·ğ“ªğ“¶ğ“®, typename ğ“£â‚, typename ğ“£â‚‚>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ ğ‘¡ğ‘Ÿğ‘–ğ‘›ğ‘”_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(const ğ“£â‚ /*destination*/, const ğ“£â‚‚ source) {
    // Detailed information about instruction.
    using ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§_ğ¢ğ§ğŸğ¨ =
        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ’Šğ’ğ’”ğ’•ğ’“ğ’–ğ’„ğ’•ğ’Šğ’ğ’_ğ’Šğ’ğ’‡ğ’<ğ’ƒğ’šğ’•ğ’†_ğ’†ğ’ğ’Šğ’•_ğ’‚ğ’”ğ’”ğ’†ğ’ğ’ƒğ’ğ’†ğ’“, ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“·ğ“ªğ“¶ğ“®, ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<ğ“£â‚>, ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<ğ“£â‚‚>>;

    if constexpr (
        ğ–ğ–“ğ–˜ğ–™ğ–—ğ–šğ–ˆğ–™ğ–ğ–”ğ–“_ğ–ˆğ–ğ–Šğ–ˆğ–ğ–˜(ğ” ğ”ªğ”­ğ”°, ğ”©ğ”¬ğ”¡ğ”°, ğ”ªğ”¬ğ”³ğ”°, ğ”¬ğ”²ğ”±ğ”°) or
        ğ–ğ–“ğ–˜ğ–™ğ–—ğ–šğ–ˆğ–™ğ–ğ–”ğ–“_ğ–ˆğ–ğ–Šğ–ˆğ–ğ–˜(ğ”¯ğ”¢ğ”­ğ”·_ğ” ğ”ªğ”­ğ”°, ğ”¯ğ”¢ğ”­_ğ”©ğ”¬ğ”¡ğ”°, ğ”¯ğ”¢ğ”­_ğ”ªğ”¬ğ”³ğ”°, ğ”¯ğ”¢ğ”­_ğ”¬ğ”²ğ”±ğ”°, ğ”¯ğ”¢ğ”­ğ”«ğ”·_ğ” ğ”ªğ”­ğ”°, ğ”¯ğ”¢ğ”­ğ”«ğ”·_ğ”©ğ”¬ğ”¡ğ”°, ğ”¯ğ”¢ğ”­ğ”«ğ”·_ğ”ªğ”¬ğ”³ğ”°, ğ”¯ğ”¢ğ”­ğ”«ğ”·_ğ”¬ğ”²ğ”±ğ”°)) {
      if (source.segment == â’®::ğ”«ğ”¬_ğ”°ğ”¢ğ”¤ğ”ªğ”¢ğ”«ğ”±)
        ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– { return get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§_ğ¢ğ§ğŸğ¨::ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢ğ”°); }
      // Note: it's not clear how we should handle rep_before_segment when there are more than one prefix: it's only important for
      // 8086 CPU and more than one prefix could only happen on 80386+â€¦ put segment override prefix directly before opcode for now.
      if constexpr (ğ”¯ğ”¢ğ”­_ğ”Ÿğ”¢ğ”£ğ”¬ğ”¯ğ”¢_ğ”°ğ”¢ğ”¤ğ”ªğ”¢ğ”«ğ”±<ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼>) {
        return get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
            ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§_ğ¢ğ§ğŸğ¨>,
            std::array{ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(source.segment))},
            ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§_ğ¢ğ§ğŸğ¨>));
      } else {
        return get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(std::array{ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(source.segment))}, ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§_ğ¢ğ§ğŸğ¨::ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢ğ”°));
      }
    } else if constexpr (
        ğ–ğ–“ğ–˜ğ–™ğ–—ğ–šğ–ˆğ–™ğ–ğ–”ğ–“_ğ–ˆğ–ğ–Šğ–ˆğ–ğ–˜(ğ”¦ğ”«ğ”°, ğ”°ğ” ğ”ğ”°, ğ”°ğ”±ğ”¬ğ”°) or
        ğ–ğ–“ğ–˜ğ–™ğ–—ğ–šğ–ˆğ–™ğ–ğ–”ğ–“_ğ–ˆğ–ğ–Šğ–ˆğ–ğ–˜(ğ”¯ğ”¢ğ”­_ğ”¦ğ”«ğ”°, ğ”¯ğ”¢ğ”­ğ”·_ğ”°ğ” ğ”ğ”°, ğ”¯ğ”¢ğ”­_ğ”°ğ”±ğ”¬ğ”°, ğ”¯ğ”¢ğ”­ğ”«ğ”·_ğ”¦ğ”«ğ”°, ğ”¯ğ”¢ğ”­ğ”«ğ”·_ğ”°ğ” ğ”ğ”°, ğ”¯ğ”¢ğ”­ğ”«ğ”·_ğ”°ğ”±ğ”¬ğ”°)) {
      return get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ¢ğ§ğ¬ğ­ğ«ğ®ğœğ­ğ¢ğ¨ğ§_ğ¢ğ§ğŸğ¨::ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢ğ”°);
    } else {
      static_assert(ğ’‡ğ’‚ğ’ğ’”ğ’†<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“·ğ“ªğ“¶ğ“®>);
    }
  }
#undef ğ–ğ–“ğ–˜ğ–™ğ–—ğ–šğ–ˆğ–™ğ–ğ–”ğ–“_ğ–ˆğ–ğ–Šğ–ˆğ–
#undef ğ–ğ–“ğ–˜ğ–™ğ–—ğ–šğ–ˆğ–™ğ–ğ–”ğ–“_ğ–ˆğ–ğ–Šğ–ˆğ–ğ–˜

  template <typename ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸, typename... ğ“£>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘™ğ‘’ğ‘”ğ‘ğ‘ğ‘¦_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(const std::tuple<ğ“£...>& arguments) {
    ğ®ğ¢ğ§ğ­â‚ˆ segment = 0;
    if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      auto rm = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
      if constexpr (â’®::template ğ”¦ğ”°_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>>) {
        segment = ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(rm.segment));
      }
    }
    // All the complications related to rex don't exist in 16-bit/32-bit mode.
    if constexpr (â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ <= ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯32_ğ”¡ğ”ğ”±ğ”32) {
      if (not segment)
        ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
          return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
              get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                  ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                  ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>)),
              arguments);
        }
      return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
          get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
              std::array{ğ®ğ¢ğ§ğ­â‚ˆ(segment)},
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>)),
          arguments);
    } else if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¯ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      // Handle case where rex is mandatory separately to help compiler optimizer.
      if (not segment)
        ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
          return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
              get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                  ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                  std::array{ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘Ÿğ‘’ğ‘¥<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(arguments)},
                  ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>)),
              arguments);
        }
      return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
          get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
              std::array{ğ®ğ¢ğ§ğ­â‚ˆ(segment)},
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
              std::array{ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘Ÿğ‘’ğ‘¥<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(arguments)},
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>)),
          arguments);
    } else {
      ğ®ğ¢ğ§ğ­â‚ˆ rex = ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘Ÿğ‘’ğ‘¥<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(arguments);
      if (not rex)
        ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
          if (not segment)
            ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
              return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
                  get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                      ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                      ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>)),
                  arguments);
            }
          return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
              get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                  std::array{ğ®ğ¢ğ§ğ­â‚ˆ(segment)},
                  ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                  ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>)),
              arguments);
        }
      if (not segment)
        ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
          return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
              get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                  ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                  std::array{rex},
                  ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>)),
              arguments);
        }
      return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
          get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
              std::array{ğ®ğ¢ğ§ğ­â‚ˆ(segment)},
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
              std::array{rex},
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>)),
          arguments);
    }
  }

  template <typename ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸, typename... ğ“£>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘£ğ‘’ğ‘¥_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(const std::tuple<ğ“£...>& arguments) {
    static_assert(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¦ğ”°_ğ”³ğ”¢ğ”µ_ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>);
    static_assert(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() == 3);
    static_assert(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0] == 0xc4);
    static_assert(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() == 1);
    if constexpr (
        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¦ğ”«_ğ”ªğ”¬ğ”¡ğ”¯ğ”ª<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸> or
        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¦ğ”«_ğ”¦ğ”ªğ”ª<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      static_assert(
          ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¢ğ”µğ”±ğ”¢ğ”«ğ”°ğ”¦ğ”¬ğ”«<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() ==
          ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢ğ”°.size());
    } else {
      static_assert(
          ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() ==
          ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢ğ”°.size());
    }
    ğ®ğ¢ğ§ğ­â‚ˆ segment = 0;
    if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      auto rm = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
      if constexpr (â’®::template ğ”¦ğ”°_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>>) {
        segment = ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(rm.segment));
      }
    }
    ğ®ğ¢ğ§ğ­â‚ˆ reg_operand_byte = 0;
    if constexpr (
        â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ >= ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯64_ğ”¡ğ”ğ”±ğ”32 and ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”¢ğ”¤_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      auto reg = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”¢ğ”¤_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
      // If we have ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, or ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ« then we must ensure that we are not dealing with â‚“ğ”ªğ”ª15-â‚“ğ”ªğ”ª31.
      if constexpr (
          ğ›ğ¨ğ¨ğ¥(â’®::ğ”ğ”³ğ”µ512_ğ”¢ğ”µğ”±ğ”¯ğ”_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯ğ”°) and (std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                                               std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                                               std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«>)) {
        ğ–ğ–†ğ–ˆğ–Š_ğ–ˆğ–ğ–Šğ–ˆğ–_ğ–‡ğ–Šğ–‘ğ–”ğ–œ_ğ–”ğ–—_ğ–Šğ––ğ–šğ–†ğ–‘(ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼, reg, â’®::ğ”µğ”ªğ”ª15);
      }
      reg_operand_byte = (ğ¢ğ§ğ­â‚ˆ(reg) bitand 0b0000'1000) << 4;  // NOLINT(hicpp-signed-bitwise)
    }
    ğ®ğ¢ğ§ğ­â‚ˆ vex_operand_byte = 0;
    if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”³ğ”¢ğ”µ_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      if constexpr (â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ <= ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯32_ğ”¡ğ”ğ”±ğ”32) {
        vex_operand_byte = ğ¢ğ§ğ­â‚ˆ(std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”³ğ”¢ğ”µ_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments)) << 3;  // NOLINT(hicpp-signed-bitwise)
      } else {
        auto vex = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”³ğ”¢ğ”µ_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
        // If we have ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, or ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ« then we must ensure that we are not dealing with â‚“ğ”ªğ”ª15-â‚“ğ”ªğ”ª31.
        if constexpr (
            ğ›ğ¨ğ¨ğ¥(â’®::ğ”ğ”³ğ”µ512_ğ”¢ğ”µğ”±ğ”¯ğ”_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯ğ”°) and (std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(vex)>, typename â’®::ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                                                 std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(vex)>, typename â’®::ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                                                 std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(vex)>, typename â’®::ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«>)) {
          ğ–ğ–†ğ–ˆğ–Š_ğ–ˆğ–ğ–Šğ–ˆğ–_ğ–‡ğ–Šğ–‘ğ–”ğ–œ_ğ–”ğ–—_ğ–Šğ––ğ–šğ–†ğ–‘(ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼, vex, â’®::ğ”µğ”ªğ”ª15);
        }
        vex_operand_byte = ğ¢ğ§ğ­â‚ˆ(vex) << 3;  // NOLINT(hicpp-signed-bitwise)
      }
    }
    // Only certain subset of ğ”³ğ”¢ğ”µ-encoded instructions could have short form.
    if constexpr (
        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1] == 0b111'00001 and
        (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] bitand 0b1'0000'0'00) == 0) {
      // In 16-bit or 32-bit mode we don't have XÌ… or BÌ… bits, so could emit opcode without checking.
      if constexpr (â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ <= ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯32_ğ”¡ğ”ğ”±ğ”32) {
        if (not segment)
          ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
            return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
                get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                    ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                    std::array{
                        ğ®ğ¢ğ§ğ­â‚ˆ(0xc5),
                        ğ®ğ¢ğ§ğ­â‚ˆ(
                            ((ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1] bitand 0b1'0000'0'00) bitor
                             (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] bitand 0b0'11'11111)) xor
                            vex_operand_byte),
                        ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
                arguments);
          }
        return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
            get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                std::array{ğ®ğ¢ğ§ğ­â‚ˆ(segment)},
                ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                std::array{
                    ğ®ğ¢ğ§ğ­â‚ˆ(0xc5),
                    ğ®ğ¢ğ§ğ­â‚ˆ(
                        ((ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1] bitand 0b1'0000'0'00) bitor
                         (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] bitand 0b0'11'11111)) xor
                        vex_operand_byte),
                    ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
            arguments);
      } else if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        auto rm = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
        if constexpr (â’®::template ğ”¦ğ”°_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>>) {
          // Note: currently there are no instructions that combine opcode map 1 and vector address.
          static_assert(â’®::template ğ”¦ğ”°_ğ”¤ğ”­_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>>);
          // If registers for base and/or index are both low - we can use short form.
          if (ğ¢ğ§ğ­â‚ˆ(rm.base) <= 7 and ğ¢ğ§ğ­â‚ˆ(rm.index) <= 7) {
            if (not segment)
              ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
                return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
                    get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                        std::array{
                            ğ®ğ¢ğ§ğ­â‚ˆ(0xc5),
                            ğ®ğ¢ğ§ğ­â‚ˆ(
                                ((ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1] bitand 0b1'0000'0'00) bitor
                                 (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] bitand 0b0'11'11111)) xor
                                (reg_operand_byte bitor vex_operand_byte)),
                            ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
                    arguments);
              }
            return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
                get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                    std::array{ğ®ğ¢ğ§ğ­â‚ˆ(segment)},
                    ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                    std::array{
                        ğ®ğ¢ğ§ğ­â‚ˆ(0xc5),
                        ğ®ğ¢ğ§ğ­â‚ˆ(
                            ((ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1] bitand 0b1'0000'0'00) bitor
                             (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] bitand 0b0'11'11111)) xor
                            (reg_operand_byte bitor vex_operand_byte)),
                        ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
                arguments);
          }
        } else {
          // There are no ğ”³ğ”¢ğ”µ-encoded instructions with these operands so it's not clean how should we treat them.
          static_assert(
              not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::template ğ’ˆğ’‘_ğ’“ğ’†ğ’ˆğ’Šğ’”ğ’•ğ’†ğ’“<8>> and
              not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ¬ğğ ğ¦ğğ§ğ­_ğ«ğğ ğ¢ğ¬ğ­ğğ«> and
              not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ±ğŸ–ğŸ•_ğ«ğğ ğ¢ğ¬ğ­ğğ«> and
              not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ¦ğ¦ğ±_ğ«ğğ ğ¢ğ¬ğ­ğğ«>);
          // If rm is low registers then we can use short form.
          if (ğ¢ğ§ğ­â‚ˆ(rm) <= 7) {
            if (not segment)
              ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
                return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
                    get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                        std::array{
                            ğ®ğ¢ğ§ğ­â‚ˆ(0xc5),
                            ğ®ğ¢ğ§ğ­â‚ˆ(
                                ((ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1] bitand 0b1'0000'0'00) bitor
                                 (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] bitand 0b0'11'11111)) xor
                                (reg_operand_byte bitor vex_operand_byte)),
                            ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
                    arguments);
              }
            return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
                get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                    std::array{ğ®ğ¢ğ§ğ­â‚ˆ(segment)},
                    ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                    std::array{
                        ğ®ğ¢ğ§ğ­â‚ˆ(0xc5),
                        ğ®ğ¢ğ§ğ­â‚ˆ(
                            ((ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1] bitand 0b1'0000'0'00) bitor
                             (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] bitand 0b0'11'11111)) xor
                            (reg_operand_byte bitor vex_operand_byte)),
                        ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
                arguments);
          }
        }
      } else {
        if (not segment)
          ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
            return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
                get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                    ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                    std::array{
                        ğ®ğ¢ğ§ğ­â‚ˆ(0xc5),
                        ğ®ğ¢ğ§ğ­â‚ˆ(
                            ((ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1] bitand 0b1'0000'0'00) bitor
                             (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] bitand 0b0'11'11111)) xor
                            (reg_operand_byte bitor vex_operand_byte)),
                        ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
                arguments);
          }
        return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
            get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                std::array{ğ®ğ¢ğ§ğ­â‚ˆ(segment)},
                ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                std::array{
                    ğ®ğ¢ğ§ğ­â‚ˆ(0xc5),
                    ğ®ğ¢ğ§ğ­â‚ˆ(
                        ((ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1] bitand 0b1'0000'0'00) bitor
                         (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] bitand 0b0'11'11111)) xor
                        (reg_operand_byte bitor vex_operand_byte)),
                    ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
            arguments);
      }
      // Note: technically ğ”³ğ”¢ğ”µ-encoded instructions and ğ”µğ”¬ğ”­-encoded instructions are not the same, but the only difference is
      // possibility of â€œshort encodingâ€ of certain ğ”³ğ”¢ğ”µ-encoded instructions. This is handled above.
      return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘™ğ‘œğ‘›ğ‘”ğ‘£ğ‘’ğ‘¥_ğ‘œğ‘Ÿ_ğ‘¥ğ‘œğ‘_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(arguments);
    }
  }

  template <typename ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸, typename... ğ“£>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘’ğ‘£ğ‘’ğ‘¥_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(const std::tuple<ğ“£...>& arguments) {
    static_assert(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¦ğ”°_ğ”¢ğ”³ğ”¢ğ”µ_ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>);
    static_assert(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¢ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() == 4);
    static_assert(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¢ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0] == 0x62);
    static_assert(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() == 1);
    if constexpr (
        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¦ğ”«_ğ”ªğ”¬ğ”¡ğ”¯ğ”ª<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸> or
        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¦ğ”«_ğ”¦ğ”ªğ”ª<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      static_assert(
          ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¢ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¢ğ”µğ”±ğ”¢ğ”«ğ”°ğ”¦ğ”¬ğ”«<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() ==
          ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢ğ”°.size());
    } else {
      static_assert(
          ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¢ğ”³ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() ==
          ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢ğ”°.size());
    }
    // We need to handle RÌ…â€²RÌ…, XÌ…, BÌ…, or VÌ…â€² bits only in 64-bit mode.
    if constexpr (â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ <= ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯32_ğ”¡ğ”ğ”±ğ”32) {
      ğ®ğ¢ğ§ğ­â‚ˆ segment = 0;
      ğ®ğ¢ğ§ğ­â‚ˆ vex_operand_byte = 0;
      ğ®ğ¢ğ§ğ­â‚ˆ mask_operand_byte = 0;
      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        auto rm = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
        if constexpr (â’®::template ğ”¦ğ”°_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>>) {
          segment = ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(rm.segment));
        }
      }
      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”³ğ”¢ğ”µ_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        vex_operand_byte = ğ¢ğ§ğ­â‚ˆ(std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”³ğ”¢ğ”µ_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments)) << 3;  // NOLINT(hicpp-signed-bitwise)
      }
      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”ªğ”ğ”°ğ”¨_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        mask_operand_byte = ğ¢ğ§ğ­â‚ˆ(std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”ªğ”ğ”°ğ”¨_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments));
      }
      if (not segment)
        ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
          return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
              get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                  ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                  std::array{
                      ğ®ğ¢ğ§ğ­â‚ˆ(0x62),
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1]),
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] xor vex_operand_byte),
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] xor mask_operand_byte),
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
              arguments);
        }
      return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
          get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
              std::array{ğ®ğ¢ğ§ğ­â‚ˆ(segment)},
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
              std::array{
                  ğ®ğ¢ğ§ğ­â‚ˆ(0x62),
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1]),
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] xor vex_operand_byte),
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[3] xor mask_operand_byte),
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
          arguments);
    } else {
      ğ®ğ¢ğ§ğ­â‚ˆ segment = 0;
      ğ®ğ¢ğ§ğ­â‚ˆ reg_operand_byte = 0;
      ğ®ğ¢ğ§ğ­â‚ˆ vex_operand_byte = 0;
      ğ®ğ¢ğ§ğ­â‚ˆ mask_operand_byte = 0;
      if (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”¢ğ”¤_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        auto reg = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”¢ğ”¤_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
        if constexpr (
            ğ›ğ¨ğ¨ğ¥(â’®::ğ”ğ”³ğ”µ512_ğ”¢ğ”µğ”±ğ”¯ğ”_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯ğ”°) and (std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                                                 std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                                                 std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«>)) {
          // NOLINTNEXTLINE(hicpp-signed-bitwise)
          reg_operand_byte = ((ğ¢ğ§ğ­â‚ˆ(reg) bitand 0b000'01000) << 4) bitor (ğ¢ğ§ğ­â‚ˆ(reg) bitand 0b000'10000);
        } else {
          reg_operand_byte = (ğ¢ğ§ğ­â‚ˆ(reg) bitand 0b0000'1000) << 4;  // NOLINT(hicpp-signed-bitwise)
        }
      }
      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”³ğ”¢ğ”µ_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        auto vex = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”³ğ”¢ğ”µ_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
        vex_operand_byte = ğ¢ğ§ğ­â‚ˆ(vex) << 3;  // NOLINT(hicpp-signed-bitwise)
        if constexpr (
            ğ›ğ¨ğ¨ğ¥(â’®::ğ”ğ”³ğ”µ512_ğ”¢ğ”µğ”±ğ”¯ğ”_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯ğ”°) and (std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(vex)>, typename â’®::ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                                                 std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(vex)>, typename â’®::ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                                                 std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(vex)>, typename â’®::ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«>)) {
          if (ğ¢ğ§ğ­â‚ˆ(vex_operand_byte) < 0) {
            mask_operand_byte = 0b0'00'0'1'000;
          }
          vex_operand_byte and_eq 0b0'1111'1'11;  // NOLINT(hicpp-signed-bitwise)
        }
      }
      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        auto rm = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
        if constexpr (â’®::template ğ”¦ğ”°_ğ”¤ğ”­_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>>) {
          segment = ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(rm.segment));
          if (ğ¢ğ§ğ­â‚ˆ(rm.base) >= 8) {
            reg_operand_byte or_eq 0b0'0'1'00000;  // NOLINT(hicpp-signed-bitwise)
          }
          if (ğ¢ğ§ğ­â‚ˆ(rm.index) >= 8) {
            reg_operand_byte or_eq 0b0'1'0'00000;  // NOLINT(hicpp-signed-bitwise)
          }
        } else if constexpr (â’®::template ğ”¦ğ”°_ğ”³ğ”¢ğ” ğ”±ğ”¬ğ”¯_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>>) {
          segment = ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(rm.segment));
          if (ğ¢ğ§ğ­â‚ˆ(rm.base) >= 8) {
            reg_operand_byte or_eq 0b0'0'1'00000;  // NOLINT(hicpp-signed-bitwise)
          }
          static_assert(
              std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm.index)>, typename â’®::ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
              std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm.index)>, typename â’®::ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
              std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm.index)>, typename â’®::ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«>);
          // The same VÌ…â€² bit is used to extend VSIB's Index and ğ”³ğ”¢ğ”µ-encoded operand.
          // We have no idea how to combine these because currently there are no instructions which have both.
          static_assert(not ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”³ğ”¢ğ”µ_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>);
          reg_operand_byte or_eq (ğ¢ğ§ğ­â‚ˆ(rm.index) bitand 0b000'01000) << 3;  // NOLINT(hicpp-signed-bitwise)
          if constexpr (ğ›ğ¨ğ¨ğ¥(â’®::ğ”ğ”³ğ”µ512_ğ”¢ğ”µğ”±ğ”¯ğ”_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯ğ”°)) {
            if (ğ¢ğ§ğ­â‚ˆ(rm.index) bitand 0b000'10000) {  // NOLINT(hicpp-signed-bitwise)
              mask_operand_byte = 0b0'00'0'1'000;
            }
          }
        } else {
          // There are no ğ”³ğ”¢ğ”µ-encoded instructions with these operands so it's not clean how should we treat them.
          static_assert(
              not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::template ğ’ˆğ’‘_ğ’“ğ’†ğ’ˆğ’Šğ’”ğ’•ğ’†ğ’“<8>> and
              not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ¬ğğ ğ¦ğğ§ğ­_ğ«ğğ ğ¢ğ¬ğ­ğğ«> and
              not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ±ğŸ–ğŸ•_ğ«ğğ ğ¢ğ¬ğ­ğğ«> and
              not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ¦ğ¦ğ±_ğ«ğğ ğ¢ğ¬ğ­ğğ«>);
          // If we have ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, or ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ« then we encode two bits in reg_operand_byte - in XÌ…BÌ… bits.
          if constexpr ((std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                         std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                         std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«>)) {
            reg_operand_byte or_eq (ğ¢ğ§ğ­â‚ˆ(rm) bitand 0b000'11000) << 2;  // NOLINT(hicpp-signed-bitwise)
          } else if (ğ¢ğ§ğ­â‚ˆ(rm) >= 8) {
            reg_operand_byte or_eq 0b0'0'1'00000;  // NOLINT(hicpp-signed-bitwise)
          }
        }
      }
      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”ªğ”ğ”°ğ”¨_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        mask_operand_byte or_eq ğ¢ğ§ğ­â‚ˆ(std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”ªğ”ğ”°ğ”¨_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments));  // NOLINT(hicpp-signed-bitwise)
      }
      if (not segment)
        ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
          return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
              get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                  ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                  std::array{
                      ğ®ğ¢ğ§ğ­â‚ˆ(0x62),
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1] xor reg_operand_byte),
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] xor vex_operand_byte),
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[3] xor mask_operand_byte),
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
              arguments);
        }
      return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
          get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
              std::array{ğ®ğ¢ğ§ğ­â‚ˆ(segment)},
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
              std::array{
                  ğ®ğ¢ğ§ğ­â‚ˆ(0x62),
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1] xor reg_operand_byte),
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] xor vex_operand_byte),
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[3] xor mask_operand_byte),
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
          arguments);
    }
  }

  template <typename ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸, typename... ğ“£>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘™ğ‘œğ‘›ğ‘”ğ‘£ğ‘’ğ‘¥_ğ‘œğ‘Ÿ_ğ‘¥ğ‘œğ‘_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›(const std::tuple<ğ“£...>& arguments) {
    // Note: technically ğ”³ğ”¢ğ”µ-encoded instructions and ğ”µğ”¬ğ”­-encoded instructions are not the same, but the only difference is
    // possibility of â€œshort encodingâ€ of certain ğ”³ğ”¢ğ”µ-encoded instructions. ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘£ğ‘’ğ‘¥_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘› handles that case and then
    // calls ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘™ğ‘œğ‘›ğ‘”ğ‘£ğ‘’ğ‘¥_ğ‘œğ‘Ÿ_ğ‘¥ğ‘œğ‘_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘› to handle common case.
    static_assert(
        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¦ğ”°_ğ”³ğ”¢ğ”µ_ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸> or
        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¦ğ”°_ğ”µğ”¬ğ”­_ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>);
    static_assert(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() == 3);
    static_assert(
        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0] == 0xc4 or  // ğ”³ğ”¢ğ”µ
        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0] == 0x8f);   // ğ”µğ”¬ğ”­
    static_assert(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() == 1);
    if constexpr (
        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¦ğ”«_ğ”ªğ”¬ğ”¡ğ”¯ğ”ª<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸> or
        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¦ğ”«_ğ”¦ğ”ªğ”ª<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      static_assert(
          ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¢ğ”µğ”±ğ”¢ğ”«ğ”°ğ”¦ğ”¬ğ”«<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() ==
          ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢ğ”°.size());
    } else {
      static_assert(
          ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() +
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>.size() ==
          ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢ğ”°.size());
    }
    // We need to handle RÌ…, XÌ…, or BÌ… bits only in 64-bit mode.
    if constexpr (â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ <= ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯32_ğ”¡ğ”ğ”±ğ”32) {
      ğ®ğ¢ğ§ğ­â‚ˆ segment = 0;
      ğ®ğ¢ğ§ğ­â‚ˆ vex_operand_byte = 0;
      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        auto rm = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
        if constexpr (â’®::template ğ”¦ğ”°_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>>) {
          segment = ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(rm.segment));
        }
      }
      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”³ğ”¢ğ”µ_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        vex_operand_byte = ğ¢ğ§ğ­â‚ˆ(std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”³ğ”¢ğ”µ_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments)) << 3;  // NOLINT(hicpp-signed-bitwise)
      }
      if (not segment)
        ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
          return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
              get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                  ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                  std::array{
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0]),
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1]),
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] xor vex_operand_byte),
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
              arguments);
        }
      return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
          get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
              std::array{ğ®ğ¢ğ§ğ­â‚ˆ(segment)},
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
              std::array{
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0]),
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1]),
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] xor vex_operand_byte),
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
          arguments);
    } else if constexpr (â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ >= ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯64_ğ”¡ğ”ğ”±ğ”32) {
      ğ®ğ¢ğ§ğ­â‚ˆ segment = 0;
      ğ®ğ¢ğ§ğ­â‚ˆ reg_operand_byte = 0;
      ğ®ğ¢ğ§ğ­â‚ˆ vex_operand_byte = 0;
      if (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”¢ğ”¤_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        auto reg = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”¢ğ”¤_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
        // If we have ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, or ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ« then we must ensure that we are not dealing with â‚“ğ”ªğ”ª15-â‚“ğ”ªğ”ª31.
        if constexpr (
            ğ›ğ¨ğ¨ğ¥(â’®::ğ”ğ”³ğ”µ512_ğ”¢ğ”µğ”±ğ”¯ğ”_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯ğ”°) and (std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                                                 std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                                                 std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«>)) {
          ğ–ğ–†ğ–ˆğ–Š_ğ–ˆğ–ğ–Šğ–ˆğ–_ğ–‡ğ–Šğ–‘ğ–”ğ–œ_ğ–”ğ–—_ğ–Šğ––ğ–šğ–†ğ–‘(ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼, reg, â’®::ğ”µğ”ªğ”ª15);
        }
        reg_operand_byte = (ğ¢ğ§ğ­â‚ˆ(reg) bitand 0b0000'1000) << 4;  // NOLINT(hicpp-signed-bitwise)
      }
      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”³ğ”¢ğ”µ_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        auto vex = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”³ğ”¢ğ”µ_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
        vex_operand_byte = ğ¢ğ§ğ­â‚ˆ(vex) << 3;  // NOLINT(hicpp-signed-bitwise)
        // If we have ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, or ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ« then we must ensure that we are not dealing with â‚“ğ”ªğ”ª15-â‚“ğ”ªğ”ª31.
        if constexpr (
            ğ›ğ¨ğ¨ğ¥(â’®::ğ”ğ”³ğ”µ512_ğ”¢ğ”µğ”±ğ”¯ğ”_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯ğ”°) and (std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(vex)>, typename â’®::ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                                                 std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(vex)>, typename â’®::ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                                                 std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(vex)>, typename â’®::ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«>)) {
          ğ–ğ–†ğ–ˆğ–Š_ğ–ˆğ–ğ–Šğ–ˆğ–_ğ–‡ğ–Šğ–‘ğ–”ğ–œ_ğ–”ğ–—_ğ–Šğ––ğ–šğ–†ğ–‘(ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼, vex, â’®::ğ”µğ”ªğ”ª15);
        }
      }
      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        auto rm = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
        if constexpr (â’®::template ğ”¦ğ”°_ğ”¤ğ”­_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>>) {
          segment = ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(rm.segment));
          if (ğ¢ğ§ğ­â‚ˆ(rm.base) >= 8) {
            reg_operand_byte or_eq 0b0'0'1'00000;  // NOLINT(hicpp-signed-bitwise)
          }
          if (ğ¢ğ§ğ­â‚ˆ(rm.index) >= 8) {
            reg_operand_byte or_eq 0b0'1'0'00000;  // NOLINT(hicpp-signed-bitwise)
          }
        } else if constexpr (â’®::template ğ”¦ğ”°_ğ”³ğ”¢ğ” ğ”±ğ”¬ğ”¯_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>>) {
          segment = ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(rm.segment));
          if (ğ¢ğ§ğ­â‚ˆ(rm.base) >= 8) {
            reg_operand_byte or_eq 0b0'0'1'00000;  // NOLINT(hicpp-signed-bitwise)
          }
          static_assert(
              std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm.index)>, typename â’®::ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
              std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm.index)>, typename â’®::ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
              std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm.index)>, typename â’®::ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«>);
          if constexpr (ğ›ğ¨ğ¨ğ¥(â’®::ğ”ğ”³ğ”µ512_ğ”¢ğ”µğ”±ğ”¯ğ”_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯ğ”°)) {
            ğ–ğ–†ğ–ˆğ–Š_ğ–ˆğ–ğ–Šğ–ˆğ–_ğ–‡ğ–Šğ–‘ğ–”ğ–œ_ğ–”ğ–—_ğ–Šğ––ğ–šğ–†ğ–‘(ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼, rm.index, â’®::ğ”µğ”ªğ”ª15);
          }
          reg_operand_byte or_eq (ğ¢ğ§ğ­â‚ˆ(rm.index) bitand 0b0000'1000) << 3;  // NOLINT(hicpp-signed-bitwise)
        } else {
          // There are no ğ”³ğ”¢ğ”µ-encoded instructions with these operands so it's not clean how should we treat them.
          static_assert(
              not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::template ğ’ˆğ’‘_ğ’“ğ’†ğ’ˆğ’Šğ’”ğ’•ğ’†ğ’“<8>> and
              not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ¬ğğ ğ¦ğğ§ğ­_ğ«ğğ ğ¢ğ¬ğ­ğğ«> and
              not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ±ğŸ–ğŸ•_ğ«ğğ ğ¢ğ¬ğ­ğğ«> and
              not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ¦ğ¦ğ±_ğ«ğğ ğ¢ğ¬ğ­ğğ«>);
          // If we have ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, or ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ« then we must ensure that we are not dealing with â‚“ğ”ªğ”ª15-â‚“ğ”ªğ”ª31.
          if constexpr ((std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                         std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
                         std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«>)) {
            if constexpr (ğ›ğ¨ğ¨ğ¥(â’®::ğ”ğ”³ğ”µ512_ğ”¢ğ”µğ”±ğ”¯ğ”_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯ğ”°)) {
              ğ–ğ–†ğ–ˆğ–Š_ğ–ˆğ–ğ–Šğ–ˆğ–_ğ–‡ğ–Šğ–‘ğ–”ğ–œ_ğ–”ğ–—_ğ–Šğ––ğ–šğ–†ğ–‘(ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼, rm, â’®::ğ”µğ”ªğ”ª15);
            }
            reg_operand_byte or_eq (ğ¢ğ§ğ­â‚ˆ(rm) bitand 0b0000'1000) << 2;  // NOLINT(hicpp-signed-bitwise)
          } else if (ğ¢ğ§ğ­â‚ˆ(rm) >= 8) {
            reg_operand_byte or_eq 0b0'0'1'00000;  // NOLINT(hicpp-signed-bitwise)
          }
        }
      }
      if (not segment)
        ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
          return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
              get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                  ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
                  std::array{
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0]),
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1] xor reg_operand_byte),
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] xor vex_operand_byte),
                      ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
              arguments);
        }
      return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(
          get_assembler().ğ‘’ğ‘šğ‘–ğ‘¡â‚’â‚š(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
              std::array{ğ®ğ¢ğ§ğ­â‚ˆ(segment)},
              ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”©ğ”¢ğ”¤ğ”ğ” ğ”¶_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µğ”¢ğ”°<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>,
              std::array{
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0]),
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1] xor reg_operand_byte),
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”³ğ”¢ğ”µ_ğ”¬ğ”¯_ğ”µğ”¬ğ”­_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[2] xor vex_operand_byte),
                  ğ®ğ¢ğ§ğ­â‚ˆ(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”­ğ”¯ğ”¬ğ”­ğ”¢ğ”¯<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[0])})),
          arguments);
    }
  }

  template <typename ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸, typename... ğ“£>
  [[nodiscard]] ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr auto ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘Ÿğ‘’ğ‘¥(const std::tuple<ğ“£...>& arguments) const -> ğ®ğ¢ğ§ğ­â‚ˆ {
    static_assert(â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ >= ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯64_ğ”¡ğ”ğ”±ğ”32);
    ğ®ğ¢ğ§ğ­â‚ˆ rex = ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¯ğ”¢ğ”µ_ğ”­ğ”¯ğ”¢ğ”£ğ”¦ğ”µ<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>;
    if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”¢ğ”¤_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      auto reg = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”¢ğ”¤_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
      if constexpr (std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::template ğ’ˆğ’‘_ğ’“ğ’†ğ’ˆğ’Šğ’”ğ’•ğ’†ğ’“<8>>) {
        // Note: we neex â„œğ”ˆğ”› not only for ğ”¯8ğ”Ÿ to ğ”¯15ğ”Ÿ, but also for ğ”°ğ”­ğ”©/ğ”Ÿğ”­ğ”©/ğ”°ğ”¦ğ”©/ğ”¡ğ”¦ğ”©.
        if (ğ¢ğ§ğ­â‚ˆ(reg) >= 4) {
          // But only 3th bit is encoded in â„œğ”ˆğ”›.â„œ.
          rex or_eq ğ®ğ¢ğ§ğ­â‚ˆ(ğ®ğ¢ğ§ğ­â‚ˆ(0b01'000'000) bitor ((ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(reg)) bitand 0b1000) >> 1));  // NOLINT(hicpp-signed-bitwise)
        }
      } else if constexpr (
          not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ¬ğğ ğ¦ğğ§ğ­_ğ«ğğ ğ¢ğ¬ğ­ğğ«> and
          not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ±ğŸ–ğŸ•_ğ«ğğ ğ¢ğ¬ğ­ğğ«> and
          not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ¦ğ¦ğ±_ğ«ğğ ğ¢ğ¬ğ­ğğ«>) {
        // Most register types encode additional bit in â„œğ”ˆğ”›.â„œ, but not ğ¬ğğ ğ¦ğğ§ğ­_ğ«ğğ ğ¢ğ¬ğ­ğğ«, ğ±ğŸ–ğŸ•_ğ«ğğ ğ¢ğ¬ğ­ğğ«, or ğ¦ğ¦ğ±_ğ«ğğ ğ¢ğ¬ğ­ğğ«.
        if (ğ¢ğ§ğ­â‚ˆ(reg) >= 8) {
          rex or_eq ğ®ğ¢ğ§ğ­â‚ˆ(ğ®ğ¢ğ§ğ­â‚ˆ(0b01'000'000) bitor ((ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(reg)) bitand 0b1000) >> 1));  // NOLINT(hicpp-signed-bitwise)
        }
        // If we have ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, or ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ« then we must ensure that we are not dealing with â‚“ğ”ªğ”ª15-â‚“ğ”ªğ”ª31.
        if constexpr (
            â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ >= ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯64_ğ”¡ğ”ğ”±ğ”32 and ğ›ğ¨ğ¨ğ¥(â’®::ğ”ğ”³ğ”µ512_ğ”¢ğ”µğ”±ğ”¯ğ”_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯ğ”°) and
            (std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
             std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
             std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«>)) {
          ğ–ğ–†ğ–ˆğ–Š_ğ–ˆğ–ğ–Šğ–ˆğ–_ğ–‡ğ–Šğ–‘ğ–”ğ–œ_ğ–”ğ–—_ğ–Šğ––ğ–šğ–†ğ–‘(ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼, reg, â’®::ğ”µğ”ªğ”ª15);
        }
      }
    }
    if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      auto rm = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
      if constexpr (â’®::template ğ”¦ğ”°_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>>) {
        static_assert(â’®::template ğ”¦ğ”°_ğ”¤ğ”­_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>>);
        // Additional bit of base register number is encoded as â„œğ”ˆğ”›.ğ”….  Note: ğ¢ğ§ğ­â‚ˆ(ğ”«ğ”¬_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯) == -1 which is less than 8.
        if (ğ¢ğ§ğ­â‚ˆ(rm.base) >= 8) {
          rex or_eq ğ®ğ¢ğ§ğ­â‚ˆ(ğ®ğ¢ğ§ğ­â‚ˆ(0b01'000'000) bitor ((ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(rm.base)) bitand 0b1000) >> 3));  // NOLINT(hicpp-signed-bitwise)
        }
        // Additional bit of index register number is encoded as â„œğ”ˆğ”›.ğ”›.  Note: ğ¢ğ§ğ­â‚ˆ(ğ”«ğ”¬_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯) == -1 which is less than 8.
        if (ğ¢ğ§ğ­â‚ˆ(rm.index) >= 8) {
          rex or_eq ğ®ğ¢ğ§ğ­â‚ˆ(ğ®ğ¢ğ§ğ­â‚ˆ(0b01'000'000) bitor ((ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(rm.index)) bitand 0b1000) >> 2));  // NOLINT(hicpp-signed-bitwise)
        }
      } else if constexpr (std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::template ğ’ˆğ’‘_ğ’“ğ’†ğ’ˆğ’Šğ’”ğ’•ğ’†ğ’“<8>>) {
        // Note: we neex â„œğ”ˆğ”› not only for ğ”¯8ğ”Ÿ to ğ”¯15ğ”Ÿ, but also for ğ”°ğ”­ğ”©/ğ”Ÿğ”­ğ”©/ğ”°ğ”¦ğ”©/ğ”¡ğ”¦ğ”©.
        if (ğ¢ğ§ğ­â‚ˆ(rm) >= 4) {
          // But only 3th bit is encoded in â„œğ”ˆğ”›.ğ”….
          rex or_eq ğ®ğ¢ğ§ğ­â‚ˆ(ğ®ğ¢ğ§ğ­â‚ˆ(0b01'000'000) bitor ((ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(rm)) bitand 0b1000) >> 3));  // NOLINT(hicpp-signed-bitwise)
        }
      } else if constexpr (
          not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ¬ğğ ğ¦ğğ§ğ­_ğ«ğğ ğ¢ğ¬ğ­ğğ«> and
          not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ±ğŸ–ğŸ•_ğ«ğğ ğ¢ğ¬ğ­ğğ«> and
          not std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ¦ğ¦ğ±_ğ«ğğ ğ¢ğ¬ğ­ğğ«>) {
        // Most register types encode additional bit in â„œğ”ˆğ”›.ğ”…, but not ğ¬ğğ ğ¦ğğ§ğ­_ğ«ğğ ğ¢ğ¬ğ­ğğ«, ğ±ğŸ–ğŸ•_ğ«ğğ ğ¢ğ¬ğ­ğğ«, or ğ¦ğ¦ğ±_ğ«ğğ ğ¢ğ¬ğ­ğğ«.
        if (ğ¢ğ§ğ­â‚ˆ(rm) >= 8) {
          rex or_eq ğ®ğ¢ğ§ğ­â‚ˆ(ğ®ğ¢ğ§ğ­â‚ˆ(0b01'000'000) bitor ((ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(rm)) bitand 0b1000) >> 3));  // NOLINT(hicpp-signed-bitwise)
        }
        // If we have ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«, or ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ« then we must ensure that we are not dealing with â‚“ğ”ªğ”ª15-â‚“ğ”ªğ”ª31.
        if constexpr (
            â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ >= ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯64_ğ”¡ğ”ğ”±ğ”32 and ğ›ğ¨ğ¨ğ¥(â’®::ğ”ğ”³ğ”µ512_ğ”¢ğ”µğ”±ğ”¯ğ”_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯ğ”°) and
            (std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ±ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
             std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ²ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«> or
             std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::ğ³ğ¦ğ¦_ğ«ğğ ğ¢ğ¬ğ­ğğ«>)) {
          ğ–ğ–†ğ–ˆğ–Š_ğ–ˆğ–ğ–Šğ–ˆğ–_ğ–‡ğ–Šğ–‘ğ–”ğ–œ_ğ–”ğ–—_ğ–Šğ––ğ–šğ–†ğ–‘(ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼, rm, â’®::ğ”µğ”ªğ”ª15);
        }
      }
    }
    // If sanity_checks are enabled then we must verify that â„œğ”ˆğ”› is not combined with ğ”ğ”¥/ğ” ğ”¥/ğ”¡ğ”¥/ğ”Ÿğ”¥.
    if constexpr (ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼->sanity_checks) {
      // If â„œğ”ˆğ”› is not present then there are nothing to check.
      if (not rex) {
        return rex;
      }
      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        auto reg = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
        if constexpr (std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(reg)>, typename â’®::template ğ’ˆğ’‘_ğ’“ğ’†ğ’ˆğ’Šğ’”ğ’•ğ’†ğ’“<8>>) {
          ğ–ğ–†ğ–ˆğ–Š_ğ–ˆğ–ğ–Šğ–ˆğ–_ğ–†ğ–‡ğ–”ğ–›ğ–Š_ğ–”ğ–—_ğ–Šğ––ğ–šğ–†ğ–‘(ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼, ğ¢ğ§ğ­â‚ˆ(reg), 0);
        }
      }
      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        auto rm = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
        if constexpr (std::is_same_v<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(rm)>, typename â’®::template ğ’ˆğ’‘_ğ’“ğ’†ğ’ˆğ’Šğ’”ğ’•ğ’†ğ’“<8>>) {
          ğ–ğ–†ğ–ˆğ–Š_ğ–ˆğ–ğ–Šğ–ˆğ–_ğ–†ğ–‡ğ–”ğ–›ğ–Š_ğ–”ğ–—_ğ–Šğ––ğ–šğ–†ğ–‘(ğ“¸ğ“¹ğ“½ğ“²ğ“¸ğ“·ğ“¼, ğ¢ğ§ğ­â‚ˆ(rm), 0);
        }
      }
    }
    return rex;
  }

  template <typename ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸, typename ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“», typename... ğ“£>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘ğ‘œğ‘ ğ‘¡_ğ‘œğ‘ğ‘ğ‘œğ‘‘ğ‘’_ğ‘–ğ‘›ğ‘ ğ‘¡ğ‘Ÿğ‘¢ğ‘ğ‘¡ğ‘–ğ‘œğ‘›_ğ‘ğ‘ğ‘Ÿğ‘¡(
      ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“»&& emitter,
      const std::tuple<ğ“£...>& arguments) {
    if constexpr (
        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”¢ğ”¤_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸> or
        ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¦ğ”ªğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        static_assert(not ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¦ğ”«_ğ”¦ğ”ªğ”ª<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>);
        if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¦ğ”ªğ”ª2_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
          return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘ ğ‘–ğ‘_ğ‘‘ğ‘–ğ‘ ğ‘<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(emitter, arguments)
              .ğ‘’ğ‘šğ‘–ğ‘¡áµ¢â‚˜â‚˜(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
                  {ğ‘–ğ‘šğ‘šğ‘’ğ‘‘ğ‘–ğ‘ğ‘¡ğ‘’_ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¦ğ”ªğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments)),
                   ğ‘–ğ‘šğ‘šğ‘’ğ‘‘ğ‘–ğ‘ğ‘¡ğ‘’_ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¦ğ”ªğ”ª2_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>)}));
        } else {
          return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘ ğ‘–ğ‘_ğ‘‘ğ‘–ğ‘ ğ‘<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(emitter, arguments)
              .ğ‘’ğ‘šğ‘–ğ‘¡áµ¢â‚˜â‚˜(ğ‘–ğ‘šğ‘šğ‘’ğ‘‘ğ‘–ğ‘ğ‘¡ğ‘’_ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¦ğ”ªğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments)));
        }
      } else if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¦ğ”«_ğ”¦ğ”ªğ”ª<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘ ğ‘–ğ‘_ğ‘‘ğ‘–ğ‘ ğ‘<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(emitter, arguments)
            .ğ‘’ğ‘šğ‘–ğ‘¡áµ¢â‚˜â‚˜(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¢ğ”µğ”±ğ”¢ğ”«ğ”°ğ”¦ğ”¬ğ”«<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>);
      } else {
        return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘ ğ‘–ğ‘_ğ‘‘ğ‘–ğ‘ ğ‘<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(emitter, arguments);
      }
    } else if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¦ğ”ªğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      static_assert(not ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¦ğ”«_ğ”¦ğ”ªğ”ª<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>);
      if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¦ğ”ªğ”ª2_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
        return emitter.ğ‘’ğ‘šğ‘–ğ‘¡áµ¢â‚˜â‚˜(ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(
            {ğ‘–ğ‘šğ‘šğ‘’ğ‘‘ğ‘–ğ‘ğ‘¡ğ‘’_ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¦ğ”ªğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments)),
             ğ‘–ğ‘šğ‘šğ‘’ğ‘‘ğ‘–ğ‘ğ‘¡ğ‘’_ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¦ğ”ªğ”ª2_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>)}));
      }
      return emitter.ğ‘’ğ‘šğ‘–ğ‘¡áµ¢â‚˜â‚˜(ğ‘–ğ‘šğ‘šğ‘’ğ‘‘ğ‘–ğ‘ğ‘¡ğ‘’_ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¦ğ”ªğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments)));
    } else if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¦ğ”«_ğ”¦ğ”ªğ”ª<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      return emitter.ğ‘’ğ‘šğ‘–ğ‘¡áµ¢â‚˜â‚˜(ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¢ğ”µğ”±ğ”¢ğ”«ğ”°ğ”¦ğ”¬ğ”«<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>);
    } else {
      return emitter;
    }
  }

  template <typename ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸, typename ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“», typename... ğ“£>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘ ğ‘–ğ‘_ğ‘‘ğ‘–ğ‘ ğ‘(ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“»&& emitter, const std::tuple<ğ“£...>& arguments) {
    ğ®ğ¢ğ§ğ­â‚ˆ reg = ğ‘”ğ‘’ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘Ÿğ‘’ğ‘”<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(arguments);
    if constexpr (not ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”ªğ”¢ğ”ªğ”¬ğ”¯ğ”¶_ğ”¯ğ”¢ğ”£ğ”¢ğ”¯ğ”¢ğ”«ğ” ğ”¢<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘Ÿğ‘’ğ‘”ğ‘–ğ‘ ğ‘¡ğ‘’ğ‘Ÿğ‘ (emitter, reg, std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments));
    } else {
      // Memory reference always goes into ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡ (except with string instructions and xlat).
      const auto& address = std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”ª_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments);
      if constexpr (ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°_ğ”´ğ”¦ğ”¡ğ”±ğ”¥ == 16) {
        return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘šğ‘’ğ‘šğ‘œğ‘Ÿğ‘¦_16ğ‘ğ‘–ğ‘¡_ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ <ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(emitter, reg, address);
      } else if constexpr (ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°_ğ”´ğ”¦ğ”¡ğ”±ğ”¥ == 32 or ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°_ğ”´ğ”¦ğ”¡ğ”±ğ”¥ == 64) {
        static_assert(std::is_same_v<decltype(address.disp), const ğ¢ğ§ğ­â‚ƒâ‚‚>);
        if constexpr (â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ == ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯64_ğ”¡ğ”ğ”±ğ”32) {
          if constexpr (â’®::template ğ”¦ğ”°_â‚“ğ”¦ğ”­_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(address)>>) {
            return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘šğ‘’ğ‘šğ‘œğ‘Ÿğ‘¦_â‚“ğ‘–ğ‘_ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ (emitter, reg, address);
          }
        }
        if constexpr (â’®::template ğ”¦ğ”°_ğ”³ğ”¢ğ” ğ”±ğ”¬ğ”¯_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(address)>>) {
          return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘šğ‘’ğ‘šğ‘œğ‘Ÿğ‘¦_ğ‘£ğ‘’ğ‘ğ‘¡ğ‘œğ‘Ÿ_ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ <ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(emitter, reg, address);
        } else if constexpr (â’®::template ğ”¦ğ”°_ğ”¤ğ”­_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(address)>>) {
          return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘šğ‘’ğ‘šğ‘œğ‘Ÿğ‘¦_32ğ‘ğ‘–ğ‘¡_ğ‘œğ‘Ÿ_64ğ‘ğ‘–ğ‘¡_ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ <ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(emitter, reg, address);
        }
      } else {
        static_assert(ğ’‡ğ’‚ğ’ğ’”ğ’†<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>);
      }
    }
  }

  template <typename ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸, typename... ğ“£>
  [[nodiscard]] ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr auto ğ‘”ğ‘’ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘Ÿğ‘’ğ‘”(const std::tuple<ğ“£...>& arguments) -> ğ®ğ¢ğ§ğ­â‚ˆ {
    if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ”¯ğ”¢ğ”¤_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      auto reg = ğ¢ğ§ğ­â‚ˆ(std::get<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸::ğ”¯ğ”¢ğ”¤_ğ”¬ğ”­ğ”¢ğ”¯ğ”ğ”«ğ”¡>(arguments));
      if constexpr (std::is_same_v<decltype(reg), typename â’®::ğ¬ğğ ğ¦ğğ§ğ­_ğ«ğğ ğ¢ğ¬ğ­ğğ«>) {
        // NOLINTNEXTLINE(cppcoreguidelines-pro-bounds-constant-array-index,hicpp-signed-bitwise)
        return ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”°ğ”¢ğ”¤ğ”ªğ”¢ğ”«ğ”±_ğ”±ğ”¬_ğ”¯ğ”¢ğ”¤â‚ˆâ‚€â‚ƒâ‚ˆâ‚†[reg bitand 0xb000'11111];  // Segment register must be remapped for use as
                                                                               // reg.
      } else if constexpr (â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ == ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯64_ğ”¡ğ”ğ”±ğ”32) {
        // We can only have more than 8 registers in ğ”µ86_64 mode.
        return ğ®ğ¢ğ§ğ­â‚ˆ(reg bitand 0b00'000'111);  // NOLINT(hicpp-signed-bitwise)
      } else {
        return ğ®ğ¢ğ§ğ­â‚ˆ(reg);  // legacy or compatibility mode, not segment - just return register number.
      }
    } else {
      // If we don't have ğ”¯ğ”¢ğ”¤ operand then reg encodes an opcode extension.
      return ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¬ğ”­ğ” ğ”¬ğ”¡ğ”¢_ğ”¢ğ”µğ”±ğ”¢ğ”«ğ”°ğ”¦ğ”¬ğ”«<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>[1];
    }
  }

  template <typename ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“», typename ğ“»ğ“®ğ“°ğ“²ğ“¼ğ“½ğ“®ğ“»>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘Ÿğ‘’ğ‘”ğ‘–ğ‘ ğ‘¡ğ‘’ğ‘Ÿğ‘ (ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“»&& emitter, ğ®ğ¢ğ§ğ­â‚ˆ reg, ğ“»ğ“®ğ“°ğ“²ğ“¼ğ“½ğ“®ğ“» rm_register) {
    static_assert(not std::is_same_v<ğ“»ğ“®ğ“°ğ“²ğ“¼ğ“½ğ“®ğ“», typename â’®::ğ¬ğğ ğ¦ğğ§ğ­_ğ«ğğ ğ¢ğ¬ğ­ğğ«>);
    ğ®ğ¢ğ§ğ­â‚ˆ rm = ğ¢ğ§ğ­â‚ˆ(rm_register);
    // If there are no memory access then rm just carries low 3 bits of register number.
    if constexpr (â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ == ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯64_ğ”¡ğ”ğ”±ğ”32) {
      // We can only have more than 8 registers in ğ”µ86_64 mode.
      rm &= 0b00'000'111;  // NOLINT(hicpp-signed-bitwise)
    }
    return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{ğ®ğ¢ğ§ğ­â‚ˆ(0b11'000'000 bitor (reg << 3) bitor (rm << 0))});  // NOLINT(hicpp-signed-bitwise)
  }

  template <typename ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸, typename ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“», typename ğ“ªğ“­ğ“­ğ“»ğ“®ğ“¼ğ“¼>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘šğ‘’ğ‘šğ‘œğ‘Ÿğ‘¦_16ğ‘ğ‘–ğ‘¡_ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ (ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“»&& emitter, ğ®ğ¢ğ§ğ­â‚ˆ reg, ğ“ªğ“­ğ“­ğ“»ğ“®ğ“¼ğ“¼ address) {
    // If we have 16-bit address then only two registers could be used as base: 3 (ğ”Ÿğ”µ) and 4 (ğ”Ÿğ”­). And two registers could be
    // used as index: 6 (ğ”°ğ”¦) and 7(ğ”¡ğ”¦). Also both base and index can be absent. We can use the following value to easily
    // distinguish all 9 cases:
    // NOLINTNEXTLINE(cppcoreguidelines-pro-bounds-constant-array-index)
    ğ®ğ¢ğ§ğ­â‚ˆ rm = ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¯ğ”ª_ğ”°ğ”¢ğ”©ğ”¢ğ” ğ”±ğ”¬ğ”¯_ğ”±ğ”¬_ğ”¯ğ”ªâ‚ˆâ‚€â‚ˆâ‚†  // NOLINTNEXTLINE(hicpp-signed-bitwise)
        [(ğ¢ğ§ğ­â‚ˆ(address.base) bitand 0b0000'1010) bitor (ğ¢ğ§ğ­â‚ˆ(address.index) bitand 0b0001'0101)];
    static_assert(std::is_same_v<decltype(address.disp), const ğ¢ğ§ğ­â‚â‚†>);
    // rm is 6 both when only ğ”Ÿğ”­ is used without index and when absolute addressing is used. Hadle absolute addressing first.
    if ((rm == 0b0000'0110) and (ğ¢ğ§ğ­â‚ˆ(address.base) != 0b0000'0101))
      ğ–ğ–†ğ–ˆğ–Š_ğ–šğ–“ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
        return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(  // NOLINTNEXTLINE(hicpp-signed-bitwise)
            std::array{ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'000 bitor (reg << 3) bitor rm), ğ®ğ¢ğ§ğ­â‚ˆ(address.disp), ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢)});
      }
    // Note: if only ğ”Ÿğ”­ is used then we shouldn't try to use form without displacement.
    if ((rm != 0b0000'0110) and address.disp == 0) {  // NOLINTNEXTLINE(hicpp-signed-bitwise)
      return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{ğ®ğ¢ğ§ğ­â‚ˆ((reg << 3) bitor rm)});
    }
    if (ğ‘£ğ‘ğ‘™ğ‘–ğ‘‘_ğ‘‘ğ‘–ğ‘ ğ‘8<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(address.disp)) {  // NOLINTNEXTLINE(hicpp-signed-bitwise)
      return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{ğ®ğ¢ğ§ğ­â‚ˆ(0b01'000'000 bitor (reg << 3) bitor rm), ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(address.disp))});
    }
    return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(  // NOLINTNEXTLINE(hicpp-signed-bitwise)
        std::array{ğ®ğ¢ğ§ğ­â‚ˆ(0b10'000'000 bitor (reg << 3) bitor rm), ğ®ğ¢ğ§ğ­â‚ˆ(address.disp), ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢)});
  }

  template <typename ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸, typename ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“», typename ğ“ªğ“­ğ“­ğ“»ğ“®ğ“¼ğ“¼>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto)
  ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘šğ‘’ğ‘šğ‘œğ‘Ÿğ‘¦_32ğ‘ğ‘–ğ‘¡_ğ‘œğ‘Ÿ_64ğ‘ğ‘–ğ‘¡_ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ (ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“»&& emitter, ğ®ğ¢ğ§ğ­â‚ˆ reg, ğ“ªğ“­ğ“­ğ“»ğ“®ğ“¼ğ“¼ address) {
    static_assert(â’®::template ğ”¦ğ”°_ğ”¤ğ”­_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(address)>>);
    static_assert(std::is_same_v<decltype(address.disp), const ğ¢ğ§ğ­â‚ƒâ‚‚>);
    if (address.base <= â’®::ğ”«ğ”¬_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯ and address.index == â’®::ğ”«ğ”¬_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯)
      ğ–ğ–†ğ–ˆğ–Š_ğ–šğ–“ğ–‘ğ–ğ–ğ–Šğ–‘ğ– { return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘šğ‘’ğ‘šğ‘œğ‘Ÿğ‘¦_32ğ‘ğ‘–ğ‘¡_ğ‘œğ‘Ÿ_64ğ‘ğ‘–ğ‘¡_ğ‘ğ‘ğ‘ ğ‘œğ‘™ğ‘¢ğ‘¡ğ‘’_ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ (emitter, reg, address); }
    if (address.index == â’®::ğ”«ğ”¬_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯)
      ğ–ğ–†ğ–ˆğ–Š_ğ–‘ğ–ğ–ğ–Šğ–‘ğ– { return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘šğ‘’ğ‘šğ‘œğ‘Ÿğ‘¦_32ğ‘ğ‘–ğ‘¡_ğ‘œğ‘Ÿ_64ğ‘ğ‘–ğ‘¡_ğ‘ğ‘ğ‘ ğ‘’_ğ‘œğ‘›ğ‘™ğ‘¦_ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ <ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(emitter, reg, address); }
    return ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘šğ‘’ğ‘šğ‘œğ‘Ÿğ‘¦_32ğ‘ğ‘–ğ‘¡_ğ‘œğ‘Ÿ_64ğ‘ğ‘–ğ‘¡_ğ‘ğ‘ğ‘ ğ‘’_ğ‘ğ‘›ğ‘‘_ğ‘–ğ‘›ğ‘‘ğ‘’ğ‘¥_ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ <ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(emitter, reg, address);
  }

  template <typename ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“», typename ğ“ªğ“­ğ“­ğ“»ğ“®ğ“¼ğ“¼>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto)
  ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘šğ‘’ğ‘šğ‘œğ‘Ÿğ‘¦_32ğ‘ğ‘–ğ‘¡_ğ‘œğ‘Ÿ_64ğ‘ğ‘–ğ‘¡_ğ‘ğ‘ğ‘ ğ‘œğ‘™ğ‘¢ğ‘¡ğ‘’_ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ (ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“»&& emitter, ğ®ğ¢ğ§ğ­â‚ˆ reg, ğ“ªğ“­ğ“­ğ“»ğ“®ğ“¼ğ“¼ address) {
    static_assert(â’®::template ğ”¦ğ”°_ğ”¤ğ”­_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(address)>>);
    static_assert(std::is_same_v<decltype(address.disp), const ğ¢ğ§ğ­â‚ƒâ‚‚>);
    if constexpr (â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ == ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯64_ğ”¡ğ”ğ”±ğ”32) {
      return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{
          ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'100 bitor (reg << 3)),  // NOLINT(hicpp-signed-bitwise)
          ğ®ğ¢ğ§ğ­â‚ˆ(0b00'100'101),
          ğ®ğ¢ğ§ğ­â‚ˆ(address.disp),
          ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),        // NOLINT(hicpp-signed-bitwise)
          ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),    // NOLINT(hicpp-signed-bitwise)
          ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢)});  // NOLINT(hicpp-signed-bitwise)
    } else {
      return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{
          ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'101 bitor (reg << 3)),  // NOLINT(hicpp-signed-bitwise)
          ğ®ğ¢ğ§ğ­â‚ˆ(address.disp),
          ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),        // NOLINT(hicpp-signed-bitwise)
          ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),    // NOLINT(hicpp-signed-bitwise)
          ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢)});  // NOLINT(hicpp-signed-bitwise)
    }
  }

  template <typename ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸, typename ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“», typename ğ“ªğ“­ğ“­ğ“»ğ“®ğ“¼ğ“¼>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto)
  ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘šğ‘’ğ‘šğ‘œğ‘Ÿğ‘¦_32ğ‘ğ‘–ğ‘¡_ğ‘œğ‘Ÿ_64ğ‘ğ‘–ğ‘¡_ğ‘ğ‘ğ‘ ğ‘’_ğ‘œğ‘›ğ‘™ğ‘¦_ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ (ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“»&& emitter, ğ®ğ¢ğ§ğ­â‚ˆ reg, ğ“ªğ“­ğ“­ğ“»ğ“®ğ“¼ğ“¼ address) {
    static_assert(â’®::template ğ”¦ğ”°_ğ”¤ğ”­_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(address)>>);
    static_assert(std::is_same_v<decltype(address.disp), const ğ¢ğ§ğ­â‚ƒâ‚‚>);
    ğ®ğ¢ğ§ğ­â‚ˆ base = ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(address.base));  // NOLINT(hicpp-use-auto,modernize-use-auto)
    if constexpr (â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ == ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯64_ğ”¡ğ”ğ”±ğ”32) {
      base &= 0b00'000'111;  // NOLINT(hicpp-signed-bitwise)
    }
    if (base != 0b101 and address.disp == 0) {
      if (base == 0b100)
        ğ–ğ–†ğ–ˆğ–Š_ğ–šğ–“ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
          // NOLINTNEXTLINE(hicpp-signed-bitwise)
          return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'100 bitor (reg << 3)), ğ®ğ¢ğ§ğ­â‚ˆ(0b00'100'100)});
        }
      // NOLINTNEXTLINE(hicpp-signed-bitwise)
      return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'000 bitor (reg << 3) bitor base)});
    }
    if (ğ‘£ğ‘ğ‘™ğ‘–ğ‘‘_ğ‘‘ğ‘–ğ‘ ğ‘8<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(address.disp)) {
      if (base == 0b100)
        ğ–ğ–†ğ–ˆğ–Š_ğ–šğ–“ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
          // NOLINTNEXTLINE(hicpp-signed-bitwise)
          return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{ğ®ğ¢ğ§ğ­â‚ˆ(0b01'000'100 bitor (reg << 3)), ğ®ğ¢ğ§ğ­â‚ˆ(0b00'100'100), ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(address.disp))});
        }
      // NOLINTNEXTLINE(hicpp-signed-bitwise)
      return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{ğ®ğ¢ğ§ğ­â‚ˆ(0b01'000'000 bitor (reg << 3) bitor base), ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(address.disp))});
    }
    if (base == 0b100)
      ğ–ğ–†ğ–ˆğ–Š_ğ–šğ–“ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
        // NOLINTNEXTLINE(hicpp-signed-bitwise)
        return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{
            ğ®ğ¢ğ§ğ­â‚ˆ(0b10'000'100 bitor (reg << 3)),
            ğ®ğ¢ğ§ğ­â‚ˆ(0b00'100'100),
            ğ®ğ¢ğ§ğ­â‚ˆ(address.disp),
            ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),        // NOLINT(hicpp-signed-bitwise)
            ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),    // NOLINT(hicpp-signed-bitwise)
            ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢)});  // NOLINT(hicpp-signed-bitwise)
      }
    return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{
        ğ®ğ¢ğ§ğ­â‚ˆ(0b10'000'000 bitor (reg << 3) bitor base),  // NOLINT(hicpp-signed-bitwise)
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp),
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),        // NOLINT(hicpp-signed-bitwise)
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),    // NOLINT(hicpp-signed-bitwise)
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢)});  // NOLINT(hicpp-signed-bitwise)
  }

  template <typename ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸, typename ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“», typename ğ“ªğ“­ğ“­ğ“»ğ“®ğ“¼ğ“¼>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto)
  ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘šğ‘’ğ‘šğ‘œğ‘Ÿğ‘¦_32ğ‘ğ‘–ğ‘¡_ğ‘œğ‘Ÿ_64ğ‘ğ‘–ğ‘¡_ğ‘ğ‘ğ‘ ğ‘’_ğ‘ğ‘›ğ‘‘_ğ‘–ğ‘›ğ‘‘ğ‘’ğ‘¥_ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ (ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“»&& emitter, ğ®ğ¢ğ§ğ­â‚ˆ reg, ğ“ªğ“­ğ“­ğ“»ğ“®ğ“¼ğ“¼ address) {
    // Note: in legacy and compatibility modes this correctly handles the case when index is ğ”¢ğ”¦ğ”·/ğ”¯ğ”¦ğ”·.
    ğ®ğ¢ğ§ğ­â‚ˆ index = ğ®ğ¢ğ§ğ­â‚ˆ(ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(address.index)) bitand ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'111));  // NOLINT(hicpp-use-auto,modernize-use-auto)
    if (address.base <= â’®::ğ”«ğ”¬_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯)
      ğ–ğ–†ğ–ˆğ–Š_ğ–šğ–“ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
        return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{
            ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'100 bitor (reg << 3)),                                      // NOLINT(hicpp-signed-bitwise)
            ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'101 bitor (ğ®ğ¢ğ§ğ­â‚ˆ(address.scale) << 6) bitor (index << 3)),  // NOLINT(hicpp-signed-bitwise)
            ğ®ğ¢ğ§ğ­â‚ˆ(address.disp),
            ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),        // NOLINT(hicpp-signed-bitwise)
            ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),    // NOLINT(hicpp-signed-bitwise)
            ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢)});  // NOLINT(hicpp-signed-bitwise)
      }
    ğ®ğ¢ğ§ğ­â‚ˆ base = ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(address.base));  // NOLINT(hicpp-use-auto,modernize-use-auto)
    if constexpr (â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ == ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯64_ğ”¡ğ”ğ”±ğ”32) {
      base &= 0b00'000'111;  // NOLINT(hicpp-signed-bitwise)
    }
    if (base != 0b101 and address.disp == 0) {
      return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{
          // NOLINTNEXTLINE(hicpp-signed-bitwise)
          ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'100 bitor (reg << 3)),
          // NOLINTNEXTLINE(hicpp-signed-bitwise)
          ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'000 bitor (ğ®ğ¢ğ§ğ­â‚ˆ(address.scale) << 6) bitor (index << 3) bitor (base << 0))});
    }
    if (ğ‘£ğ‘ğ‘™ğ‘–ğ‘‘_ğ‘‘ğ‘–ğ‘ ğ‘8<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(address.disp)) {
      return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{
          ğ®ğ¢ğ§ğ­â‚ˆ(0b01'000'100 bitor (reg << 3)),  // NOLINT(hicpp-signed-bitwise)
          ğ®ğ¢ğ§ğ­â‚ˆ(
              0b00'000'000 bitor (ğ®ğ¢ğ§ğ­â‚ˆ(address.scale) << 6) bitor (index << 3) bitor (base << 0)),  // NOLINT(hicpp-signed-bitwise)
          ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(address.disp))});
    }
    return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{
        ğ®ğ¢ğ§ğ­â‚ˆ(0b10'000'100 bitor (reg << 3)),                                                        // NOLINT(hicpp-signed-bitwise)
        ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'000 bitor (ğ®ğ¢ğ§ğ­â‚ˆ(address.scale) << 6) bitor (index << 3) bitor (base << 0)),  // NOLINT(hicpp-signed-bitwise)
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp),
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),        // NOLINT(hicpp-signed-bitwise)
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),    // NOLINT(hicpp-signed-bitwise)
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢)});  // NOLINT(hicpp-signed-bitwise)
  }

  template <typename ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“», typename ğ“ªğ“­ğ“­ğ“»ğ“®ğ“¼ğ“¼>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘šğ‘’ğ‘šğ‘œğ‘Ÿğ‘¦_â‚“ğ‘–ğ‘_ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ (ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“»&& emitter, ğ®ğ¢ğ§ğ­â‚ˆ reg, ğ“ªğ“­ğ“­ğ“»ğ“®ğ“¼ğ“¼ address) {
    static_assert(â’®::template ğ”¦ğ”°_â‚“ğ”¦ğ”­_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(address)>>);
    static_assert(std::is_same_v<decltype(address.disp), ğ¢ğ§ğ­â‚ƒâ‚‚>);
    static_assert(â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ == ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯64_ğ”¡ğ”ğ”±ğ”32);
    return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{
        ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'101 bitor (reg << 3)),  // NOLINT(hicpp-signed-bitwise)
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp),
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),        // NOLINT(hicpp-signed-bitwise)
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),    // NOLINT(hicpp-signed-bitwise)
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢)});  // NOLINT(hicpp-signed-bitwise)
  }

  template <typename ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸, typename ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“», typename ğ“ªğ“­ğ“­ğ“»ğ“®ğ“¼ğ“¼>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr decltype(auto) ğ‘’ğ‘šğ‘–ğ‘¡_ğ‘šğ‘œğ‘‘ğ‘Ÿğ‘š_ğ‘šğ‘’ğ‘šğ‘œğ‘Ÿğ‘¦_ğ‘£ğ‘’ğ‘ğ‘¡ğ‘œğ‘Ÿ_ğ‘ğ‘‘ğ‘‘ğ‘Ÿğ‘’ğ‘ ğ‘ (ğ“®ğ“¶ğ“²ğ“½ğ“½ğ“®ğ“»&& emitter, ğ®ğ¢ğ§ğ­â‚ˆ reg, ğ“ªğ“­ğ“­ğ“»ğ“®ğ“¼ğ“¼ address) {
    static_assert(â’®::template ğ”¦ğ”°_ğ”³ğ”¢ğ” ğ”±ğ”¬ğ”¯_ğ”ğ”¡ğ”¡ğ”¯ğ”¢ğ”°ğ”°<ğ’“ğ’†ğ’ğ’ğ’—ğ’†_ğ’„ğ’—ğ’“ğ’†ğ’‡<decltype(address)>>);
    static_assert(std::is_same_v<decltype(address.disp), ğ¢ğ§ğ­â‚ƒâ‚‚>);
    ğ®ğ¢ğ§ğ­â‚ˆ index = ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(address.index));  // NOLINT(hicpp-use-auto,modernize-use-auto)
    if constexpr (â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ == ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯64_ğ”¡ğ”ğ”±ğ”32) {
      // We can only have more than 8 registers in ğ”µ86_64 mode.
      index &= 0b00'000'111;  // NOLINT(hicpp-signed-bitwise)
    }
    if (address.base == â’®::ğ”«ğ”¬_ğ”¯ğ”¢ğ”¤ğ”¦ğ”°ğ”±ğ”¢ğ”¯)
      ğ–ğ–†ğ–ˆğ–Š_ğ–šğ–“ğ–‘ğ–ğ–ğ–Šğ–‘ğ– {
        return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{
            ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'100 bitor (reg << 3)),                                      // NOLINT(hicpp-signed-bitwise)
            ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'101 bitor (ğ®ğ¢ğ§ğ­â‚ˆ(address.scale) << 6) bitor (index << 3)),  // NOLINT(hicpp-signed-bitwise)
            ğ®ğ¢ğ§ğ­â‚ˆ(address.disp),
            ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),        // NOLINT(hicpp-signed-bitwise)
            ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),    // NOLINT(hicpp-signed-bitwise)
            ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢)});  // NOLINT(hicpp-signed-bitwise)
      }
    ğ®ğ¢ğ§ğ­â‚ˆ base = ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(address.base));  // NOLINT(hicpp-use-auto,modernize-use-auto)
    if constexpr (â’®::ğ”µ86_ğ”ªğ”¬ğ”¡ğ”¢ == ğ¨ğ©ğ­ğ¢ğ¨ğ§ğ¬::ğ±ğŸ–ğŸ”_ğ¦ğ¨ğğ::ğ”ğ”¡ğ”¡ğ”¯64_ğ”¡ğ”ğ”±ğ”32) {
      // We can only have more than 8 registers in ğ”µ86_64 mode.
      base &= 0b00'000'111;  // NOLINT(hicpp-signed-bitwise)
    }
    if (ğ‘£ğ‘ğ‘™ğ‘–ğ‘‘_ğ‘‘ğ‘–ğ‘ ğ‘8<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>(address.disp)) {
      return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{
          ğ®ğ¢ğ§ğ­â‚ˆ(0b10'000'100 bitor (reg << 3)),  // NOLINT(hicpp-signed-bitwise)
          ğ®ğ¢ğ§ğ­â‚ˆ(
              0b00'000'000 bitor (ğ®ğ¢ğ§ğ­â‚ˆ(address.scale) << 6) bitor (index << 3) bitor (base << 0)),  // NOLINT(hicpp-signed-bitwise)
          ğ®ğ¢ğ§ğ­â‚ˆ(ğ¢ğ§ğ­â‚ˆ(address.disp))});
    }
    return emitter.ğ‘’ğ‘šğ‘–ğ‘¡â‚˜áµ£â‚˜(std::array{
        ğ®ğ¢ğ§ğ­â‚ˆ(0b10'000'100 bitor (reg << 3)),                                                        // NOLINT(hicpp-signed-bitwise)
        ğ®ğ¢ğ§ğ­â‚ˆ(0b00'000'000 bitor (ğ®ğ¢ğ§ğ­â‚ˆ(address.scale) << 6) bitor (index << 3) bitor (base << 0)),  // NOLINT(hicpp-signed-bitwise)
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp),
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),        // NOLINT(hicpp-signed-bitwise)
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),    // NOLINT(hicpp-signed-bitwise)
        ğ®ğ¢ğ§ğ­â‚ˆ(address.disp >> 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢)});  // NOLINT(hicpp-signed-bitwise)
  }

  template <typename ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸, typename ğ“­ğ“²ğ“¼ğ“¹_ğ“½ğ”‚ğ“¹ğ“®>
  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š constexpr auto ğ‘£ğ‘ğ‘™ğ‘–ğ‘‘_ğ‘‘ğ‘–ğ‘ ğ‘8(ğ“­ğ“²ğ“¼ğ“¹_ğ“½ğ”‚ğ“¹ğ“® disp) -> ğ›ğ¨ğ¨ğ¥ {
    if constexpr (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¥ğ”ğ”°_ğ” ğ”¬ğ”ªğ”­ğ”¯ğ”¢ğ”°ğ”°ğ”¢ğ”¡_ğ”¡ğ”¦ğ”°ğ”­ğ”©ğ”ğ” ğ”¢ğ”ªğ”¢ğ”«ğ”±<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) {
      static_assert(
          ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¡ğ”¦ğ”°ğ”­8_ğ”°ğ” ğ”ğ”©ğ”¢<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸> > 1 and
          ((ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¡ğ”¦ğ”°ğ”­8_ğ”°ğ” ğ”ğ”©ğ”¢<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸> bitand
            (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¡ğ”¦ğ”°ğ”­8_ğ”°ğ” ğ”ğ”©ğ”¢<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸> - 1)) == 0));
      if (disp bitand (ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¡ğ”¦ğ”°ğ”­8_ğ”°ğ” ğ”ğ”©ğ”¢<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸> - 1))
        ğ–ğ–†ğ–ˆğ–Š_ğ–šğ–“ğ–‘ğ–ğ–ğ–Šğ–‘ğ– { return false; }
      return (
          ((std::numeric_limits<ğ¢ğ§ğ­â‚ˆ>::min() * ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¡ğ”¦ğ”°ğ”­8_ğ”°ğ” ğ”ğ”©ğ”¢<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>) <= disp) and
          (disp <= (std::numeric_limits<ğ¢ğ§ğ­â‚ˆ>::max() * ğ—¯ğ—®ğ˜€ğ—¶ğ—°_ğ—®ğ˜€ğ˜€ğ—²ğ—ºğ—¯ğ—¹ğ—²ğ—¿::ğ”¦ğ”«ğ”°ğ”±ğ”¯ğ”²ğ” ğ”±ğ”¦ğ”¬ğ”«_ğ”¡ğ”¦ğ”°ğ”­8_ğ”°ğ” ğ”ğ”©ğ”¢<ğ“²ğ“·ğ“¼ğ“½ğ“»ğ“¾ğ“¬ğ“½ğ“²ğ“¸ğ“·_ğ“²ğ“·ğ“¯ğ“¸>)));
    } else {
      return ğ¢ğ§ğ­â‚ˆ(disp) == disp;
    }
  }

  template <typename ğ“²ğ“¶ğ“¶ğ“®ğ“­ğ“²ğ“ªğ“½ğ“®>
  [[nodiscard]] ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š auto constexpr ğ‘–ğ‘šğ‘šğ‘’ğ‘‘ğ‘–ğ‘ğ‘¡ğ‘’_ğ‘¡ğ‘œ_ğ‘ğ‘Ÿğ‘Ÿğ‘ğ‘¦(ğ“²ğ“¶ğ“¶ğ“®ğ“­ğ“²ğ“ªğ“½ğ“® immediate) -> std::array<ğ®ğ¢ğ§ğ­â‚ˆ, sizeof immediate> {
    static_assert(std::is_integral_v<ğ“²ğ“¶ğ“¶ğ“®ğ“­ğ“²ğ“ªğ“½ğ“®>);
    std::make_unsigned<ğ“²ğ“¶ğ“¶ğ“®ğ“­ğ“²ğ“ªğ“½ğ“®> unsigned_immediate = immediate;  // Make sure there are no surprses related to signedness.
    static_assert(sizeof immediate == sizeof unsigned_immediate);
    if constexpr (sizeof immediate == 1) {
      return std::array{ğ®ğ¢ğ§ğ­â‚ˆ(immediate)};
    } else if constexpr (sizeof immediate == 2) {
      return std::array{ğ®ğ¢ğ§ğ­â‚ˆ(immediate), ğ®ğ¢ğ§ğ­â‚ˆ(immediate >> ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢)};
    } else if constexpr (sizeof immediate == 4) {
      return std::array{
          ğ®ğ¢ğ§ğ­â‚ˆ(immediate), ğ®ğ¢ğ§ğ­â‚ˆ(immediate >> ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢), ğ®ğ¢ğ§ğ­â‚ˆ(immediate >> 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢), ğ®ğ¢ğ§ğ­â‚ˆ(immediate >> 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢)};
    } else if constexpr (sizeof immediate == 8) {
      return std::array{
          ğ®ğ¢ğ§ğ­â‚ˆ(immediate),
          ğ®ğ¢ğ§ğ­â‚ˆ(immediate >> ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),
          ğ®ğ¢ğ§ğ­â‚ˆ(immediate >> 2 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),
          ğ®ğ¢ğ§ğ­â‚ˆ(immediate >> 3 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),
          ğ®ğ¢ğ§ğ­â‚ˆ(immediate >> 4 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),
          ğ®ğ¢ğ§ğ­â‚ˆ(immediate >> 5 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),
          ğ®ğ¢ğ§ğ­â‚ˆ(immediate >> 6 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢),
          ğ®ğ¢ğ§ğ­â‚ˆ(immediate >> 7 * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢)};
    } else {
      std::array<ğ®ğ¢ğ§ğ­â‚ˆ, sizeof(ğ“²ğ“¶ğ“¶ğ“®ğ“­ğ“²ğ“ªğ“½ğ“®)> result{};
      for (ğ¬ğ¢ğ³ğ counter = 0; counter < sizeof immediate; ++counter) {
        result[counter] = ğ®ğ¢ğ§ğ­â‚ˆ(unsigned_immediate >> (counter * ğ”Ÿğ”¶ğ”±ğ”¢ğ”°ğ”¦ğ”·ğ”¢));
      }
      return result;
    }
  }

  ğ–ğ–†ğ–ˆğ–Š_ğ–‹ğ–”ğ–—ğ–ˆğ–Šğ–ğ–“ğ–‘ğ–ğ–“ğ–Š decltype(auto) constexpr get_assembler() noexcept { return *static_cast<ğ“ªğ“¼ğ“¼ğ“®ğ“¶ğ“«ğ“µğ“®ğ“»*>(this); }
};

}  // namespace ğ˜†ğ—®ğ—°ğ—²::ğ˜…ğŸ´ğŸ²

#endif  // ğ”„ğ”–ğ”–ğ”ˆğ”ğ”…ğ”ğ”ˆâ„œ_ğ”›86_ğ”…ğ”œğ”—ğ”ˆ_ğ”ˆğ”â„‘ğ”—_ğ”„ğ”–ğ”–ğ”ˆğ”ğ”…ğ”ğ”ˆâ„œ_â„Œ
